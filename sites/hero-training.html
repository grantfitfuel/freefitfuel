<!DOCTYPE html>
<html lang="en-GB">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hero Training — FreeFitFuel</title>
<link rel="stylesheet" href="style.css?v=22" />
<style>
  /* ===== Local accent UI ===== */
  .chips{display:flex;flex-wrap:wrap;gap:.5rem;margin:.4rem 0 1rem}
  .chip{display:inline-flex;align-items:center;gap:.4rem;padding:.5rem .9rem;
        border-radius:999px;border:0;cursor:pointer;font-weight:800;color:#111}
  .chip:hover{filter:brightness(1.05)}
  .chip--str{background:#ff9432} .chip--eng{background:#63b0ff}
  .chip--cal{background:#2ecc71} .chip--mob{background:#b07cff}
  .chip--rec{background:#ffd24d} .chip--boss{background:#ff6b6b}
  .chip.active{outline:3px solid rgba(255,255,255,.25)}
  .progress{display:flex;align-items:center;gap:.6rem;margin:.6rem 0 1rem}
  .bar{flex:1;height:12px;background:#1a1d24;border-radius:999px;overflow:hidden;border:1px solid var(--stroke)}
  .bar>span{display:block;height:100%;background:linear-gradient(90deg,#ff6a00,#ff9a3d);width:0%}
  .badge-row{display:flex;flex-wrap:wrap;gap:.35rem}
  .badge{padding:.28rem .55rem;border-radius:999px;border:1px solid var(--stroke);background:var(--glass);font-size:.86rem}
  .badge.unlocked{background:#1a2b18;border-color:#234a20;color:#9afc9a}

  .phases{display:grid;gap:14px}
  @media(min-width:820px){.phases{grid-template-columns:repeat(3,1fr)}}
  .phase{background:var(--glass);border:1px solid var(--stroke);border-radius:14px;padding:14px}
  .phase[hidden]{display:none!important}
  .phase h3{margin:.15rem 0 .5rem}
  .pill-note{display:inline-flex;align-items:center;gap:.35rem;font-size:.9rem;
             border:1px solid var(--stroke);background:var(--glass);border-radius:999px;padding:.25rem .55rem;margin-top:.5rem}

  /* Boss modal */
  dialog#trial{background:#0f1319;color:var(--ink);border:1px solid var(--stroke);border-radius:14px;max-width:min(760px,92vw)}
  dialog::backdrop{background:rgba(0,0,0,.55)}
  .modal-hd{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;border-bottom:1px solid var(--stroke)}
  .modal-bd{padding:1rem;display:grid;gap:.8rem}
  .btn-small{border:1px solid var(--stroke);background:var(--glass);color:var(--ink);padding:.35rem .6rem;border-radius:8px}
</style>
</head>
<body>
<div id="site-header"></div>
<script src="/js/header-loader.js"></script>

<main class="wrap">
  <header>
    <h1>Hero Training</h1>
    <p>Four phases. Weekly quests. Boss fights. Track XP, earn badges, and aim the engine toward a <strong>marathon</strong> within 12 months — while getting stronger and sharper at calisthenics.</p>
  </header>

  <!-- theme filters -->
  <div class="chips" id="themeChips" aria-label="Filter themes">
    <button class="chip chip--str"  data-tag="strength">💪 Strength</button>
    <button class="chip chip--eng"  data-tag="engine">🏃 Engine</button>
    <button class="chip chip--cal"  data-tag="calisthenics">🤸 Calisthenics</button>
    <button class="chip chip--mob"  data-tag="mobility">🧘 Mobility</button>
    <button class="chip chip--rec"  data-tag="recovery">🛌 Recovery</button>
    <button class="chip chip--boss" data-tag="boss">⚔️ Boss Fights</button>
  </div>

  <!-- XP + badges -->
  <div class="progress">
    <strong id="levelLbl">Level 1 • Rookie</strong>
    <div class="bar" aria-label="Season XP"><span id="xpFill"></span></div>
    <span id="xpLbl">0 XP</span>
    <button class="btn--pill" id="claimXP">+25 XP (claim)</button>
  </div>
  <div class="badge-row" id="badges">
    <span class="badge" data-key="z2">Z2 Streak</span>
    <span class="badge" data-key="strength3">3× Strength Week</span>
    <span class="badge" data-key="boss1">First Boss Fight</span>
  </div>

  <section class="phases" id="phaseGrid">
    <article class="phase" data-tags="strength engine mobility">
      <h3>⚒️ Phase I — Foundation (Weeks 1–4)</h3>
      <p>Skill the lifts, build easy engine (Z2), 10-min daily mobility. Beginner-friendly but spicy.</p>
      <div class="btn-row">
        <a class="btn" href="hero-phase-1.html">Open Plan</a>
        <button class="btn--pill" data-open-trial>Boss Fights</button>
      </div>
      <div class="pill-note">🎯 Focus: strength + engine</div>
    </article>

    <article class="phase" data-tags="strength engine calisthenics">
      <h3>🚀 Phase II — Build (Weeks 5–8)</h3>
      <p>Volume + tempo. Long run 10–12k. First calisthenics progressions.</p>
      <div class="btn-row">
        <a class="btn--pill" href="#">Open Plan</a>
        <button class="btn--pill" data-open-trial>Boss Fights</button>
      </div>
      <div class="pill-note">🎯 Focus: mixed</div>
    </article>

    <article class="phase" data-tags="strength engine calisthenics">
      <h3>🔥 Phase III — Peak (Weeks 9–12)</h3>
      <p>Power + repeatability; long engines up to half-marathon; strict pull-ups and pistols appear.</p>
      <div class="btn-row">
        <a class="btn--pill" href="#">Open Plan</a>
        <button class="btn--pill" data-open-trial>Boss Fights</button>
      </div>
      <div class="pill-note">🎯 Focus: power</div>
    </article>

    <article class="phase" data-tags="engine calisthenics recovery mobility">
      <h3>🌟 Phase IV — Legacy</h3>
      <p>Marathon finish. Sustain & sharpen; play with skills; mentor others.</p>
      <div class="btn-row">
        <a class="btn--pill" href="#">Open Plan</a>
        <button class="btn--pill" data-open-trial>Boss Fights</button>
      </div>
      <div class="pill-note">🎯 Focus: engine + mastery</div>
    </article>
  </section>
</main>

<footer class="site-footer"><div class="container"><p>© 2025 FreeFitFuel</p></div></footer>

<!-- Boss Fight modal -->
<dialog id="trial" aria-labelledby="trialT">
  <div class="modal-hd">
    <h3 id="trialT">⚔️ Boss Fight — 5k Check</h3>
    <button class="btn-small" data-close>Close</button>
  </div>
  <div class="modal-bd">
    <p>Pick one. Hit a personal best to unlock the <strong>Boss 1</strong> badge.</p>
    <ol>
      <li><strong>5k Run</strong> — time it. (Treadmill or outdoors)</li>
      <li><strong>5k Row</strong> — C2/erg time.</li>
      <li><strong>No rower?</strong> Do <em>Row Alternative</em>: <strong>100 reps total</strong> of dumbbell/supported rows (5–10 reps/side EMOM) + 1 km brisk walk. Keep notes.</li>
    </ol>
    <div class="btn-row">
      <button class="btn" id="logPR">Log PR & unlock</button>
      <button class="btn--pill" id="trialGuide">Form tips (YouTube)</button>
    </div>
  </div>
</dialog>

<script>
  /* ===== XP / badges ===== */
  const XP_MAX = 500;
  const xpFill = document.getElementById('xpFill');
  const xpLbl  = document.getElementById('xpLbl');
  const levelLbl = document.getElementById('levelLbl');
  const claim = document.getElementById('claimXP');
  const BADGE_KEYS = ['z2','strength3','boss1'];

  function loadState(){
    const s = JSON.parse(localStorage.getItem('heroXP')||'{}');
    return {xp: s.xp||0, badges: s.badges||{}};
  }
  function saveState(s){ localStorage.setItem('heroXP', JSON.stringify(s)); }
  function renderState(){
    const s = loadState();
    const pct = Math.min(100, (s.xp/XP_MAX)*100);
    xpFill.style.width = pct + '%';
    xpLbl.textContent = `${s.xp} XP`;
    levelLbl.textContent = `Level ${1 + Math.floor(s.xp/250)} • Warrior`;
    document.querySelectorAll('#badges .badge').forEach(b=>{
      const k=b.dataset.key;
      b.classList.toggle('unlocked', !!s.badges[k]);
    });
  }
  claim.addEventListener('click', ()=>{
    const s=loadState(); s.xp=Math.min(XP_MAX, s.xp+25); saveState(s); renderState();
  });
  renderState();

  /* ===== Theme filtering ===== */
  const chips=[...document.querySelectorAll('#themeChips .chip')];
  const cards=[...document.querySelectorAll('#phaseGrid .phase')];
  function applyFilter(){
    const active=chips.filter(c=>c.classList.contains('active')).map(c=>c.dataset.tag);
    if(!active.length){ cards.forEach(c=>c.hidden=false); return; }
    cards.forEach(c=>{
      const tags=(c.dataset.tags||'').split(/\s+/);
      c.hidden = !active.some(t=>tags.includes(t));
    });
  }
  chips.forEach(ch=>ch.addEventListener('click',()=>{ ch.classList.toggle('active'); applyFilter();}));

  /* ===== Boss modal & badge unlock ===== */
  const dlg=document.getElementById('trial');
  document.querySelectorAll('[data-open-trial]').forEach(b=>b.addEventListener('click',()=>dlg.showModal()));
  dlg.querySelector('[data-close]').addEventListener('click',()=>dlg.close());
  document.getElementById('trialGuide').addEventListener('click',()=>{
    window.open('https://www.youtube.com/results?search_query=5k+run+tips+and+5k+row+technique','_blank');
  });
  document.getElementById('logPR').addEventListener('click',()=>{
    const s=loadState();
    s.badges = s.badges||{}; s.badges.boss1 = true;
    s.xp=Math.min(XP_MAX,(s.xp||0)+50);
    saveState(s); renderState(); dlg.close();
    alert('Nice! Boss 1 badge unlocked (+50 XP).');
  });
</script>
<script src="/app.js" defer></script>
</body>
</html>
