<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FreeFitFuel — Home</title>

  <!-- Your global stylesheet -->
  <link rel="stylesheet" href="style.css?v=21">

  <!-- Favicons & PWA -->
  <link rel="icon" type="image/svg+xml" href="img/freefitfuel-logo.svg">
  <link rel="icon" type="image/png" sizes="32x32"  href="img/freefitfuel-logo-32.png">
  <link rel="icon" type="image/png" sizes="48x48"  href="img/freefitfuel-logo-48.png">
  <link rel="apple-touch-icon" sizes="180x180" href="img/freefitfuel-logo-180.png">
  <link rel="icon" type="image/png" sizes="512x512" href="img/freefitfuel-logo-512.png">
  <meta name="theme-color" content="#FF6A00">
  <link rel="manifest" href="/manifest.json">

  <!-- Carousel + modal styles (scoped) -->
  <style>
    /* --- HERO adjustment (optional: keep your current hero unless needed) --- */
    .hero{position:relative;border-bottom:1px solid #1b1b22}
    .hero-media{position:relative;margin:0}
    .hero-media img{
      width:100%;height:clamp(340px,46vh,560px);
      object-fit:cover;object-position:center 35%;
      display:block;filter:brightness(.88) saturate(1.05);
    }
    .hero-media .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.65))}
    .hero-content{position:absolute;inset:auto 0 0 0}
    .cta-row{display:flex;gap:.6rem;flex-wrap:wrap}

    /* --- Polished continuous carousel --- */
    #ideas{margin-top:10px}
    #ideas h2{margin-bottom:.4rem}
    .marquee-wrap{
      position:relative; overflow:hidden;
      border:1px solid var(--stroke); border-radius:14px;
      background:var(--glass);
      padding:10px 0;
    }
    .marquee-track{
      display:flex; gap:12px; align-items:stretch;
      width:max-content;              /* fits content width */
      animation: marquee-scroll 30s linear infinite;
      will-change: transform;
    }
    /* pause on hover or when a dialog is open */
    .marquee-wrap:hover .marquee-track,
    .marquee-wrap:has(dialog[open]) .marquee-track { animation-play-state: paused; }

    /* Larger, slick tiles */
    .idea-tile{
      flex:0 0 auto; width:320px;      /* slight upsize */
      border-radius:14px; border:1px solid var(--stroke);
      background:#0c0f13; color:var(--ink);
      overflow:hidden; cursor:pointer; position:relative;
      box-shadow:0 1px 0 rgba(0,0,0,.2);
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .idea-tile:hover{ transform:translateY(-2px); box-shadow:0 6px 16px rgba(0,0,0,.35); }
    .idea-thumb{ display:block; width:100%; aspect-ratio:16/9; object-fit:cover; }
    .idea-body{ padding:.65rem .75rem .75rem; }
    .idea-title{ font-weight:700; margin:0 0 .15rem; }
    .idea-cap{ color:#c8c8d2; font-size:.95rem; margin:0; }

    /* Duplicate the set so the loop looks seamless */
    .marquee-inner{ display:flex; gap:12px; padding:0 10px; }

    @keyframes marquee-scroll{
      from { transform: translateX(0); }
      to   { transform: translateX(-50%); } /* we’ll duplicate content so 50% loops cleanly */
    }

    /* reduced motion */
    @media (prefers-reduced-motion: reduce){
      .marquee-track{ animation: none; }
    }

    /* --- Idea Modal (native dialog) --- */
    dialog#ideaModal{
      background:#0f1319; color:var(--ink);
      border:1px solid var(--stroke); border-radius:14px; padding:0;
      max-width:min(720px, 92vw);
    }
    dialog::backdrop{ background:rgba(0,0,0,.55) }

    .modal-head{
      display:flex; align-items:center; justify-content:space-between;
      padding:.8rem 1rem; border-bottom:1px solid var(--stroke);
    }
    .modal-head h3{ margin:0; font-size:1.15rem }
    .modal-close{
      border:1px solid var(--stroke); background:var(--glass); color:var(--ink);
      border-radius:10px; padding:.35rem .6rem; cursor:pointer;
    }
    .modal-body{ display:grid; gap:.8rem; padding:1rem }
    .modal-media{
      border:1px solid var(--stroke); border-radius:12px; overflow:hidden;
      background:#0b0f14;
    }
    .modal-media img{ width:100%; height:auto; display:block; object-fit:cover; }
    .modal-grid{ display:grid; gap:.6rem }
    @media(min-width:900px){ .modal-grid{ grid-template-columns:1.05fr .95fr } }

    .info-card{
      background:rgba(255,255,255,.05);
      border:1px solid var(--stroke); border-radius:12px; padding:.65rem .75rem;
    }
    .info-card h4{ margin:.1rem 0 .35rem; font-size:1rem }
    .info-card ul{ margin:.15rem 0; padding-left:1.1rem }
    .info-card li{ margin:.18rem 0 }

    .meta{ color:var(--inkdim); font-size:.92rem }
    .btn-row{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.25rem }
    .btn--pill{ display:inline-flex; align-items:center; gap:.35rem; border:1px solid var(--stroke); background:var(--glass); color:var(--ink); border-radius:999px; padding:.34rem .65rem; font-size:.9rem; text-decoration:none }
    .btn--pill:hover{ color:var(--accent) }
  </style>
</head>

<body>
  <!-- Shared header -->
  <div id="site-header"></div>
  <script src="/js/header-loader.js"></script>

  <!-- HERO -->
  <header class="hero" role="banner" aria-label="FreeFitFuel hero">
    <figure class="hero-media">
      <img src="img/hero.jpg" alt="Home training on a mat with dumbbells">
      <div class="overlay" aria-hidden="true"></div>
    </figure>
    <div class="hero-content wrap">
      <span class="eyebrow">Healthy body & mind</span>
      <h1><span class="accent">Stronger, Healthier, You</span></h1>
      <p class="lead">Home workouts and balanced meals to fuel your body and mind — friendly, free, and easy to follow.</p>
      <div class="cta-row">
        <a class="btn" href="workouts.html">Start Training</a>
        <a class="btn" href="nutrition.html">See Meal Ideas</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- Key sections -->
    <section class="grid" aria-label="Key sections">
      <article class="card">
        <h2>Wellbeing</h2>
        <p class="meta">Carer Support, Neuroscience, and Mental Health — practical tools for tough days.</p>
        <a class="btn" href="wellbeing.html">Open Wellbeing</a>
      </article>
      <article class="card">
        <h2>Workouts</h2>
        <p class="meta">Smart dumbbell &amp; bodyweight routines with warm-ups and cool-downs.</p>
        <a class="btn" href="workouts.html">Browse Fitness</a>
      </article>
      <article class="card">
        <h2>Nutrition</h2>
        <p class="meta">Budget-friendly recipes with allergens labelled, plus hydration helpers.</p>
        <a class="btn" href="nutrition.html">See Fuel</a>
      </article>
    </section>

    <!-- CONTINUOUS CAROUSEL -->
    <section id="ideas" aria-label="Ideas carousel">
      <h2>Ideas you can start this week</h2>

      <div class="marquee-wrap">
        <div class="marquee-track" id="marqueeTrack">
          <!-- We render two identical inner tracks for a perfect loop -->
          <div class="marquee-inner" id="marqueeInnerA"></div>
          <div class="marquee-inner" id="marqueeInnerB"></div>
        </div>
      </div>
      <p class="meta" style="margin:.45rem 0 0">Hover to pause. Click a tile for sets/reps & form cues.</p>
    </section>

    <!-- Standard site teaser -->
    <section class="split" id="workouts-teaser" aria-label="Home workout highlight">
      <figure><img src="img/curl.jpg" alt="Seated dumbbell curl at home"></figure>
      <div>
        <h2>Move better at home</h2>
        <p class="meta">Short, effective sessions with a pair of dumbbells or just bodyweight — realistic for busy days.</p>
        <a class="btn" href="workouts.html">See workout plans</a>
      </div>
    </section>

    <!-- Disclaimer -->
    <section class="section">
      <h2>Important Note</h2>
      <p>The content on FreeFitFuel is for general fitness education only and isn’t a substitute for personalised medical advice. Consult a qualified professional before starting a new programme, especially if you have any health conditions or injuries. Stop any exercise that causes sharp pain, dizziness, chest pain, or unusual shortness of breath.</p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
      <p>&copy; 2025 FreeFitFuel · All rights reserved.</p>
      <p class="credit">Created by Grant Cameron Anthony</p>
    </div>
  </footer>

  <!-- Idea Modal -->
  <dialog id="ideaModal" aria-labelledby="ideaTitle">
    <div class="modal-head">
      <h3 id="ideaTitle">Idea</h3>
      <button class="modal-close" data-close>Close</button>
    </div>
    <div class="modal-body">
      <div class="modal-media"><img id="ideaImg" alt=""></div>
      <div class="modal-grid">
        <article class="info-card">
          <h4>Overview</h4>
          <p id="ideaDesc" class="meta"></p>
          <div class="btn-row">
            <a id="ideaGuide" class="btn--pill" href="#" target="_blank" rel="noopener">Technique / Demo</a>
          </div>
        </article>
        <article class="info-card">
          <h4>Sets • Reps • Form</h4>
          <ul id="ideaDetails"></ul>
        </article>
      </div>
    </div>
  </dialog>

  <!-- Minimal JS for header burger (kept) -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const btn = document.querySelector('.hamburger');
      const nav = document.querySelector('.main-nav');
      if (btn && nav) {
        btn.addEventListener('click', () => {
          const open = btn.classList.toggle('active');
          nav.classList.toggle('open', open);
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      }
    });
  </script>

  <!-- Carousel + modal logic -->
  <script>
    // Data for tiles (extend anytime)
    const IDEAS = [
      {
        title: 'Resistance Bands',
        img: 'img/bands.jpg',
        caption: 'Full-body, joint-friendly',
        desc: 'Elastic resistance for smooth strength work at home.',
        guide: 'https://www.youtube.com/results?search_query=resistance+bands+full+body+workout+form',
        details: [
          'Full body circuit • 2–3 rounds',
          'Upper: Row 10–15 • Press 8–12',
          'Lower: Squat 10–15 • RDL 8–12',
          'Form: steady tempo, no slingshot at end range'
        ]
      },
      {
        title: 'Skipping Rope',
        img: 'img/rope.jpg',
        caption: '5–10 min fast cardio',
        desc: 'Tiny footprint, big cardio hit with low setup time.',
        guide: 'https://www.youtube.com/results?search_query=how+to+jump+rope+form',
        details: [
          'Blocks: 5 × 1 min on / 30s off',
          'Progress: add a set weekly',
          'Form: elbows tucked, wrists turn rope, soft knees'
        ]
      },
      {
        title: 'Floor Press',
        img: 'img/floorpress.jpg',
        caption: 'Chest & triceps — no bench',
        desc: 'Press from the floor to protect shoulders while loading chest.',
        guide: 'https://www.youtube.com/results?search_query=dumbbell+floor+press+form',
        details: [
          '3–4 sets • 6–10 reps',
          'Tempo: 2s down, pause on floor, press up',
          'Form: ribs down, forearms vertical at bottom'
        ]
      },
      {
        title: 'Yoga Flow',
        img: 'img/yoga.jpg',
        caption: 'Mobility & calm in 10 min',
        desc: 'Short, gentle sequence to open hips, spine, and breathing.',
        guide: 'https://www.youtube.com/results?search_query=10+minute+yoga+flow+beginner',
        details: [
          'Flow: 8–12 poses • 1–3 breaths each',
          'Add: 2–3 rounds as time allows',
          'Form: breathe through nose, keep shoulders soft'
        ]
      },
      {
        title: 'Meal Prep',
        img: 'img/mealprep.jpg',
        caption: 'Clear portions, real food',
        desc: 'Batch cook base proteins & grains to make weeknights easy.',
        guide: 'https://www.youtube.com/results?search_query=healthy+meal+prep+basics',
        details: [
          'Cook once • eat 3–4 times',
          'Macro base: protein + fibre + colour',
          'Form: use a tray plan & portion before storing'
        ]
      },
      {
        title: 'Seated Curls',
        img: 'img/curl.jpg',
        caption: 'Simple strength you can feel',
        desc: 'Strict seated curls to isolate biceps without momentum.',
        guide: 'https://www.youtube.com/results?search_query=seated+dumbbell+curls+form',
        details: [
          '3–4 sets • 8–12 reps',
          'Tempo: 2s up • 3s down',
          'Form: elbows pinned, no sway, full range'
        ]
      }
    ];

    // Build one set of tiles
    function buildTiles(intoEl){
      IDEAS.forEach(item=>{
        const fig = document.createElement('figure');
        fig.className = 'idea-tile';
        fig.setAttribute('tabindex','0'); // keyboard focus
        fig.dataset.title  = item.title;
        fig.dataset.img    = item.img;
        fig.dataset.desc   = item.desc;
        fig.dataset.guide  = item.guide;
        fig.dataset.details = JSON.stringify(item.details || []);

        const img = document.createElement('img');
        img.className = 'idea-thumb';
        img.src = item.img;
        img.alt = item.title;

        const body = document.createElement('figcaption');
        body.className = 'idea-body';

        const h3 = document.createElement('h3');
        h3.className = 'idea-title';
        h3.textContent = item.title;

        const p = document.createElement('p');
        p.className = 'idea-cap';
        p.textContent = item.caption;

        body.appendChild(h3);
        body.appendChild(p);

        fig.appendChild(img);
        fig.appendChild(body);
        intoEl.appendChild(fig);
      });
    }

    // Duplicate content for seamless loop
    function initMarquee(){
      const a = document.getElementById('marqueeInnerA');
      const b = document.getElementById('marqueeInnerB');
      if(!a || !b) return;
      buildTiles(a);
      buildTiles(b);
      // Set track width to 2x inner width => CSS animation goes -50%
      const track = document.getElementById('marqueeTrack');
      // No explicit JS sizing needed; animation uses translateX(-50%)
      // Pause on focus for accessibility (keyboard users)
      track.addEventListener('focusin', ()=> track.style.animationPlayState='paused');
      track.addEventListener('focusout', ()=> track.style.animationPlayState='running');
    }

    // Modal wiring
    function initModal(){
      const dlg = document.getElementById('ideaModal');
      const title = document.getElementById('ideaTitle');
      const img   = document.getElementById('ideaImg');
      const desc  = document.getElementById('ideaDesc');
      const list  = document.getElementById('ideaDetails');
      const guide = document.getElementById('ideaGuide');
      const closeEls = dlg.querySelectorAll('[data-close]');

      function openFromTile(tile){
        title.textContent = tile.dataset.title || 'Idea';
        img.src = tile.dataset.img || '';
        img.alt = tile.dataset.title || '';
        desc.textContent = tile.dataset.desc || '';
        guide.href = tile.dataset.guide || '#';

        // details list
        list.innerHTML = '';
        try {
          (JSON.parse(tile.dataset.details || '[]')).forEach(li=>{
            const item = document.createElement('li');
            item.textContent = li;
            list.appendChild(item);
          });
        } catch(e){}

        dlg.showModal();
      }

      // delegate clicks
      document.addEventListener('click', (e)=>{
        const tile = e.target.closest('.idea-tile');
        if(tile){ openFromTile(tile); }
      });
      // keyboard Enter/Space on focused tile
      document.addEventListener('keydown', (e)=>{
        if((e.key === 'Enter' || e.key === ' ') && document.activeElement?.classList.contains('idea-tile')){
          e.preventDefault(); openFromTile(document.activeElement);
        }
      });

      closeEls.forEach(btn=> btn.addEventListener('click', ()=> dlg.close()));
      dlg.addEventListener('click', (e)=>{ if(e.target === dlg) dlg.close(); });
      window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && dlg.open) dlg.close(); });
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      initMarquee();
      initModal();
    });
  </script>

  <script src="/app.js" defer></script>
</body>
</html>
