<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ideas – FreeFitFuel</title>

  <link rel="stylesheet" href="style.css?v=27">
  <link rel="icon" type="image/svg+xml" href="img/freefitfuel-logo.svg">

  <style>
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px 20px}

    /* Hero */
    .hero-mini figure{position:relative;max-height:360px;overflow:hidden}
    .hero-mini img{width:100%;height:360px;object-fit:cover}
    .hero-mini .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.55))}
    .hero-mini .content{position:relative;color:#fff}

    /* Sections / card */
    .section{background:var(--glass);border:1px solid var(--stroke);border-radius:14px;margin:12px 0;padding:14px}
    .card{padding:14px;border:1px solid var(--stroke);border-radius:12px;background:#111418;display:flex;flex-direction:column;gap:.6rem}
    .card h3{margin:.1rem 0 .2rem;font-size:1.1rem}
    .meta{color:var(--inkdim);font-size:.92rem}

    /* Slim pill buttons (downloads & small actions) */
    .btn--pill{
      display:inline-flex;align-items:center;gap:.35rem;
      border:1px solid var(--stroke);background:var(--glass);color:var(--ink);
      border-radius:999px;padding:.34rem .65rem;font-size:.9rem;text-decoration:none;cursor:pointer
    }
    .btn--pill:hover{color:var(--accent)}
    .btn-row{display:flex;flex-wrap:wrap;gap:.45rem}

    /* Big primary actions (kept subtle) */
    .btn{
      display:inline-flex;align-items:center;gap:.45rem;cursor:pointer;
      border:1px solid var(--stroke);background:var(--glass);color:var(--ink);
      padding:.5rem .9rem;border-radius:10px;text-decoration:none
    }
    .btn:hover{color:var(--accent)}

    /* Chips */
    .chips{display:flex;flex-wrap:wrap;gap:.35rem}
    .chip{background:var(--glass);border:1px solid var(--stroke);border-radius:999px;padding:.28rem .55rem;font-size:.82rem}

    /* Layout */
    .grid{display:grid;gap:12px}
    @media (min-width:900px){.grid{grid-template-columns:2fr 1fr}}

    /* Modal */
    dialog.idea-modal{width:min(780px,96vw);border:0;border-radius:12px;padding:0;z-index:1100;background:#0e1217;color:var(--ink)}
    dialog.idea-modal::backdrop{background:rgba(0,0,0,.5)}
    .modal-body{padding:16px;max-height:80vh;overflow:auto}
    .modal-header{display:flex;justify-content:space-between;align-items:center;gap:.6rem;border-bottom:1px solid var(--stroke);padding-bottom:8px}

    /* Drawer for archive */
    .details{background:#0e1217;border:1px solid var(--stroke);border-radius:10px;padding:.6rem .7rem}
    .details summary{cursor:pointer;font-weight:600}
    .archive-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));margin-top:.6rem}
    .archive-card{border:1px solid var(--stroke);border-radius:10px;background:#111418;padding:.6rem}
    .archive-card h4{margin:.1rem 0 .2rem;font-size:1rem}
  </style>
</head>
<body>

<!-- Shared header mount -->
<div id="site-header"></div>
<script src="/js/header-loader.js"></script>

<header class="hero-mini" role="banner" aria-label="Ideas hero">
  <figure>
    <img src="img/ideas-hero.png" alt="People moving, cooking, and smiling outdoors">
    <div class="overlay" aria-hidden="true"></div>
  </figure>
  <div class="content wrap">
    <h1><span class="accent">Weekly Challenge</span></h1>
    <p>One tiny idea to focus on all week. Monday → Sunday. Keep it simple, keep it fun.</p>
    <div class="cta-row">
      <a class="btn" href="#challenge">This Week’s Challenge</a>
      <a class="btn" href="pdf/ideas/fitness-bingo.pdf">Fitness Bingo (PDF)</a>
    </div>
  </div>
</header>

<main class="wrap" id="challenge">
  <!-- THIS WEEK -->
  <section class="section">
    <div class="grid">
      <article class="card" id="challengeCard">
        <h3 id="cTitle">Loading…</h3>
        <p class="meta" id="cMeta">—</p>
        <p id="cSummary">—</p>
        <div class="chips" id="cChips"></div>
        <div class="btn-row" id="cBtns">
          <!-- View details + any downloads injected here -->
        </div>
      </article>

      <aside class="card">
        <h3>How the weekly idea works</h3>
        <ul class="meta" style="margin:.3rem 0 0 1.1rem">
          <li>Runs **Monday → Sunday** based on your local time.</li>
          <li>Refreshes automatically each new week (deterministic rotation).</li>
          <li>Open details to see steps and tips. Keep it tiny and achievable.</li>
        </ul>
      </aside>
    </div>
  </section>

  <!-- OPTIONAL ARCHIVE BROWSER -->
  <section class="section">
    <div class="details">
      <summary>Browse all ideas (optional)</summary>
      <div class="archive-grid" id="archiveGrid"></div>
    </div>
  </section>

  <!-- INFO -->
  <section class="section">
    <div class="grid">
      <article class="card">
        <h3>Keep it tiny</h3>
        <p>Just 1–2 ideas per week is plenty. Track progress and celebrate small wins.</p>
      </article>
      <article class="card">
        <h3>Downloads</h3>
        <div class="btn-row">
          <a class="btn--pill" href="pdf/ideas/pushup-tracker.pdf">Push-Up Tracker</a>
          <a class="btn--pill" href="pdf/ideas/hydration-log.pdf">Hydration Log</a>
          <a class="btn--pill" href="pdf/ideas/fitness-bingo.pdf">Fitness Bingo</a>
        </div>
      </article>
    </div>
  </section>

  <!-- Disclaimer -->
  <section class="section">
    <h2>Important Note</h2>
    <p>The content on FreeFitFuel is for general fitness education only and isn’t a substitute for personalised medical advice. Consult a qualified professional before starting a new programme, especially if you have any health conditions or injuries. Stop any exercise that causes sharp pain, dizziness, chest pain, or unusual shortness of breath.</p>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
    <p>© 2025 FreeFitFuel · All rights reserved.</p>
    <p class="credit">Created by Grant Cameron Anthony</p>
  </div>
</footer>

<!-- Modal for details -->
<dialog id="ideaModal" class="idea-modal" aria-hidden="true"></dialog>

<script>
/* ===== Header burger ===== */
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.querySelector('.hamburger');
  const nav = document.querySelector('.main-nav');
  if(btn && nav){
    btn.addEventListener('click', () => {
      const open = btn.classList.toggle('active');
      nav.classList.toggle('open', open);
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  }
});

/* ===== Weekly Challenge App ===== */
(function(){
  const qs=(s,e=document)=>e.querySelector(s);
  const qsa=(s,e=document)=>Array.from(e.querySelectorAll(s));
  const IDEAS = [
    /* FITNESS */
    {
      title:'30-Day Push-Up Challenge',
      type:'Fitness',
      summary:'Start small, add 1–2 reps daily. Test max on Day 30.',
      details:[
        'Warm-up 2–3 min (arm circles, shoulder taps).',
        'Day 1: 5–10 total push-ups split into sets.',
        'Add 1–2 reps per day. Rest 60–90s between sets.',
        'Elevate hands on bench/table if needed.'
      ],
      tips:['Film Day 1 and Day 30 for form check.','Pair with plank holds for core.'],
      focus:['Strength','Habits'],
      time:'≤10 min',
      gear:['No equipment'],
      links:[{label:'Push-Up Tracker (PDF)',href:'pdf/ideas/pushup-tracker.pdf'}]
    },
    {
      title:'Plank Ladder',
      type:'Fitness',
      summary:'Add 5 seconds per day. Hit a solid 2–3 minutes.',
      details:['Day 1: 20s plank.','Add 5s daily.','Keep ribs down, glutes on, breath smooth.'],
      tips:['Break long holds into 2–3 sets.','Finish with child’s pose.'],
      focus:['Strength','Habits'],
      time:'≤5 min',
      gear:['No equipment']
    },
    {
      title:'5K Step-Ups',
      type:'Fitness',
      summary:'Stairs/bench intervals for legs & lungs.',
      details:['Set a timer 10–15 min.','Step up–down continuously, switch lead leg.'],
      tips:['Drive through heel.','Add light dumbbells if easy.'],
      focus:['Cardio','Strength'],
      time:'≤20 min',
      gear:['No equipment','Dumbbells']
    },

    /* NUTRITION */
    {
      title:'Hydration 7-Day',
      type:'Nutrition',
      summary:'Hit your daily ml target for a week.',
      details:['Target ≈ 30–35 ml per kg bodyweight.','Add 500–1000 ml on training days.'],
      tips:['Keep a marked bottle on desk.','Drink with each meal.'],
      focus:['Hydration','Habits'],
      time:'≤5 min',
      gear:[],
      links:[{label:'Hydration Log (PDF)',href:'pdf/ideas/hydration-log.pdf'}]
    },
    {
      title:'Meat-Free Monday',
      type:'Nutrition',
      summary:'Try one plant-based dinner each week.',
      details:['Pick a high-protein veggie recipe.','Batch cook for lunches.'],
      tips:['Use beans, tofu, lentils.','Season well: garlic, herbs, citrus.'],
      focus:['Budget','Habits'],
      time:'≤20 min',
      gear:[]
    },
    {
      title:'Rainbow on the Plate',
      type:'Nutrition',
      summary:'Eat 5 different colours in a day.',
      details:['Plan snacks: berries, carrots, peppers, greens.','Tick them off at dinner.'],
      tips:['Blend leftovers into a soup next day.'],
      focus:['Habits'],
      time:'≤10 min',
      gear:[]
    },

    /* MIND */
    {
      title:'Sleep Reset (14 Days)',
      type:'Mind',
      summary:'Same bedtime/wake time for two weeks.',
      details:['Set a wind-down alarm 60 min before bed.','No screens 30 min before.'],
      tips:['Cool, dark room.','Light stretch before bed.'],
      focus:['Sleep','Habits'],
      time:'≤10 min',
      gear:[]
    },
    {
      title:'One-Minute Breath',
      type:'Mind',
      summary:'1–5 minutes of box breathing daily.',
      details:['Inhale 4s, hold 4s, exhale 4s, hold 4s. Repeat.'],
      tips:['Use at desk or between meetings.'],
      focus:['Mindfulness','Habits'],
      time:'≤5 min',
      gear:[]
    },

    /* FUN */
    {
      title:'Fitness Bingo',
      type:'Fun',
      summary:'Complete fun squares during the week.',
      details:['Walk to the shop','Try a new vegetable','Do 20 bodyweight squats','Stretch for 5 minutes'],
      tips:['Compete with a friend for a prize.'],
      focus:['Habits','Mobility','Cardio'],
      time:'≤10 min',
      gear:[],
      links:[{label:'Fitness Bingo (PDF)',href:'pdf/ideas/fitness-bingo.pdf'}]
    },
    {
      title:'Weekend Adventure',
      type:'Fun',
      summary:'Park run, hike, cycle, or swim — pick one.',
      details:['Block 60–90 minutes.','Pack water and a snack.'],
      tips:['Invite a friend.','Log how it felt.'],
      focus:['Cardio','Mindfulness'],
      time:'≤20 min',
      gear:[]
    }
  ];

  /* ISO week helpers (Mon-Sun) */
  function startOfWeek(d){ // returns a new Date at Monday 00:00 local
    const date = new Date(d.getFullYear(), d.getMonth(), d.getDate());
    const day = (date.getDay()+6)%7; // 0=Mon
    date.setDate(date.getDate()-day);
    date.setHours(0,0,0,0);
    return date;
  }
  function endOfWeek(d){
    const s = startOfWeek(d);
    const e = new Date(s); e.setDate(e.getDate()+6); e.setHours(23,59,59,999); return e;
  }
  function isoWeekYear(d){
    // ISO week-numbering year
    const tmp = new Date(d.getTime());
    tmp.setHours(0,0,0,0);
    // Thursday determines year
    tmp.setDate(tmp.getDate() + 3 - ((tmp.getDay()+6)%7));
    return tmp.getFullYear();
  }
  function isoWeekNumber(d){
    const temp = new Date(d.getTime());
    temp.setHours(0,0,0,0);
    // Thursday of this week
    temp.setDate(temp.getDate() + 3 - ((temp.getDay()+6)%7));
    const week1 = new Date(temp.getFullYear(),0,4);
    const diff = (temp - week1 + ((week1.getDay()+6)%7 - 3)*86400000) / 86400000;
    return 1 + Math.floor(diff/7);
  }

  /* Deterministic weekly index so it rotates automatically */
  function weeklyIndex(len){
    const now = new Date();
    const y = isoWeekYear(now);
    const w = isoWeekNumber(now); // 1..53
    // Simple hash mix so distribution is nice but deterministic
    let n = (y*57 + w*131) ^ 0x9e3779b1;
    n = (n ^ (n>>>16)) * 0x45d9f3b;
    n = (n ^ (n>>>16)) * 0x45d9f3b;
    n = n ^ (n>>>16);
    const idx = Math.abs(n) % len;
    return { idx, y, w, now };
  }

  /* Render "this week" */
  function renderThisWeek(){
    const { idx, now } = weeklyIndex(IDEAS.length);
    const idea = IDEAS[idx];

    const cTitle = qs('#cTitle');
    const cMeta  = qs('#cMeta');
    const cSummary = qs('#cSummary');
    const cChips = qs('#cChips');
    const cBtns = qs('#cBtns');

    const s = startOfWeek(now);
    const e = endOfWeek(now);
    const fmt = (d)=> d.toLocaleDateString(undefined,{month:'short', day:'numeric'});
    const weekStr = `${fmt(s)} – ${fmt(e)}`;

    cTitle.textContent = idea.title;
    cMeta.textContent  = `${idea.type} • ${idea.time||'—'} • ${weekStr}`;
    cSummary.textContent = idea.summary;
    cChips.innerHTML = `
      ${(idea.focus||[]).map(t=>`<span class="chip">${t}</span>`).join('')}
      ${(idea.gear||[]).map(t=>`<span class="chip">${t}</span>`).join('')}
    `;
    cBtns.innerHTML = `
      <button class="btn" id="viewDetails">View details</button>
      ${(idea.links||[]).map(l=>`<a class="btn--pill" href="${l.href}">${l.label.replace(/\s*\(PDF\)\s*/,'')}</a>`).join('')}
    `;

    qs('#viewDetails')?.addEventListener('click', ()=>openModal(idea));
  }

  /* Archive drawer */
  function renderArchive(){
    const wrap = qs('#archiveGrid');
    if(!wrap) return;
    wrap.innerHTML = '';
    IDEAS.forEach(i=>{
      const card = document.createElement('div');
      card.className = 'archive-card';
      card.innerHTML = `
        <h4>${i.title}</h4>
        <p class="meta">${i.type} • ${i.time||'—'}</p>
        <p style="margin:.2rem 0 .4rem">${i.summary}</p>
        <div class="btn-row">
          <button class="btn--pill" data-view>View</button>
          ${(i.links||[]).map(l=>`<a class="btn--pill" href="${l.href}">${l.label.replace(/\s*\(PDF\)\s*/,'')}</a>`).join('')}
        </div>
      `;
      card.querySelector('[data-view]').addEventListener('click', ()=>openModal(i));
      wrap.appendChild(card);
    });
  }

  /* Modal */
  const modal = qs('#ideaModal');
  function openModal(i){
    if(!modal.dataset.wired){
      modal.innerHTML = `
        <div class="modal-body">
          <div class="modal-header">
            <h2 id="mTitle" style="margin:0"></h2>
            <button class="btn--pill" id="mClose" type="button">Close</button>
          </div>
          <p class="meta" id="mMeta"></p>
          <h3>How it works</h3>
          <ol id="mSteps" style="margin-left:1.2rem"></ol>
          <h3>Tips</h3>
          <ul id="mTips" style="margin-left:1.2rem"></ul>
          <div id="mLinks" class="btn-row" style="margin-top:.6rem"></div>
        </div>`;
      modal.dataset.wired='1';
      modal.querySelector('#mClose').onclick=()=>modal.close();
    }
    modal.querySelector('#mTitle').textContent = i.title;
    modal.querySelector('#mMeta').textContent  = `${i.type} • ${i.time||'—'}`;
    modal.querySelector('#mSteps').innerHTML   = (i.details||[]).map(s=>`<li>${s}</li>`).join('');
    modal.querySelector('#mTips').innerHTML    = (i.tips||[]).map(s=>`<li>${s}</li>`).join('');
    modal.querySelector('#mLinks').innerHTML   = (i.links||[]).map(l=>`<a class="btn--pill" href="${l.href}">${l.label.replace(/\s*$begin:math:text$PDF$end:math:text$\s*/,'')}</a>`).join('');
    modal.showModal();
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    renderThisWeek();
    renderArchive();
  });
})();
</script>
</body>
</html>
