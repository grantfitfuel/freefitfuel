<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Workouts – FreeFitFuel</title>

  <link rel="stylesheet" href="style.css?v=22">
  <link rel="icon" type="image/svg+xml" href="img/freefitfuel-logo.svg">

  <style>
    /* Page-only styling */
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px 20px}
    .lead{color:var(--inkdim)}
    .hero-mini{position:relative;border-bottom:1px solid #1b1b22}
    .hero-mini figure{margin:0;position:relative}
    .hero-mini img{width:100%;height:46vh;min-height:320px;object-fit:cover;display:block;filter:brightness(.9) saturate(1.05)}
    .hero-mini .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.65))}
    .hero-mini .content{position:absolute;inset:auto 0 0 0;padding:16px 20px 22px;max-width:var(--maxw);margin:0 auto}
    .hero-mini h1{margin:0 0 .35rem}
    .hero-mini p{max-width:70ch;margin:.2rem 0 0;color:#d0d0da}

    .toolbar{display:flex;flex-wrap:wrap;gap:.6rem;margin:1rem 0 1.1rem;align-items:center}
    .seg{display:inline-flex;border:1px solid var(--stroke);border-radius:999px;overflow:hidden}
    .seg button{background:var(--glass);color:var(--ink);border:0;padding:.45rem .85rem;cursor:pointer}
    .seg button[aria-pressed="true"]{background:var(--accent);color:#111;font-weight:800}
    .label{font-size:.9rem;opacity:.85;margin-right:.25rem}
    /* Equipment row – slimmer pills, single line with gentle scroll on mobile */
    .equip{display:flex;gap:.35rem;flex-wrap:nowrap;overflow-x:auto;padding:.1rem .2rem;border-radius:999px}
    .equip::-webkit-scrollbar{height:6px}
    .equip::-webkit-scrollbar-thumb{background:var(--stroke);border-radius:999px}
    .pill{
      display:inline-flex;align-items:center;gap:.35rem;
      background:var(--glass);border:1px solid var(--stroke);
      border-radius:999px;padding:.28rem .55rem;font-size:.88rem;line-height:1;
      white-space:nowrap
    }
    .pill input{accent-color:var(--accent);transform:scale(.95)}

    /* Stack Equipment label above on small screens for cleaner alignment */
    @media (max-width: 640px){
      .label.equip-label{display:block;width:100%;margin:.2rem 0 .2rem}
      .equip{padding-left:0}
      .pill{padding:.25rem .5rem;font-size:.86rem}
      .seg button{padding:.40rem .7rem}
    }

    .section{background:var(--glass);border:1px solid var(--stroke);border-radius:14px;margin:12px 0;padding:14px}
    .section>h2{margin:.15rem 0 .45rem;font-size:1.2rem}
    .plan{display:grid;gap:12px}
    @media (min-width:780px){.plan{grid-template-columns:repeat(2,1fr)}}
    .block{background:#111418;border:1px solid var(--stroke);border-radius:12px;padding:12px}
    .block h3{margin:.1rem 0 .35rem;font-size:1.05rem}
    .mov{display:flex;justify-content:space-between;gap:.6rem;padding:.45rem .55rem;border:1px dashed var(--stroke);border-radius:8px;margin:.35rem 0}
    .mov .name{font-weight:600}
    .mov .rx{opacity:.9}

    .timer{display:flex;gap:.4rem;align-items:center;margin-top:.5rem;flex-wrap:wrap}
    .timer input{width:84px;background:#0b0f14;border:1px solid var(--stroke);border-radius:6px;color:var(--ink);padding:.35rem .45rem}
    .timer button{border:1px solid var(--stroke);background:var(--glass);color:var(--ink);padding:.35rem .6rem;border-radius:8px;cursor:pointer}
    .timer .left{min-width:60px;text-align:right;opacity:.85}

    .grid{display:grid;gap:14px}
    @media (min-width:900px){.grid{grid-template-columns:repeat(3,1fr)}}
    .card{background:#111418;border:1px solid var(--stroke);border-radius:12px;overflow:hidden}
    .card h4{margin:.7rem .9rem .35rem}
    .tile{position:relative;aspect-ratio:16/9;background:#000;overflow:hidden}
    .tile button.play{position:absolute;inset:0;display:grid;place-items:center;border:0;background:transparent;cursor:pointer}
    .tile .thumb{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(.88)}
    .tile iframe{position:absolute;inset:0;width:100%;height:100%;border:0;display:none}
    .tile .openers{position:absolute;right:.45rem;bottom:.45rem;display:flex;gap:.35rem;z-index:2}
    .tile .openers a{background:rgba(0,0,0,.65);color:#fff;border:1px solid rgba(255,255,255,.25);font-size:.8rem;padding:.25rem .45rem;border-radius:6px;text-decoration:none}

    .tags{display:flex;flex-wrap:wrap;gap:.35rem;margin:.45rem .9rem .6rem}
    .tag{background:rgba(255,255,255,.08);border:1px solid var(--stroke);border-radius:999px;padding:.18rem .55rem;font-size:.82rem}

    .anatomy{display:flex;align-items:center;gap:.5rem;padding:.5rem .9rem .85rem}
    .anatomy img{width:92px;height:auto;border-radius:8px;border:1px solid var(--stroke);background:#0b0f14}
    .anatomy .notes{font-size:.9rem;color:var(--inkdim)}
    .meta{color:var(--inkdim);font-size:.92rem}
    .muted{opacity:.8}

    /* Goal explainer card */
    .goals{display:grid;gap:.5rem}
    .goals .row{display:grid;gap:.35rem}
    @media (min-width:700px){ .goals{grid-template-columns:repeat(2,1fr)} }
    .badge{display:inline-block;background:rgba(255,255,255,.08);border:1px solid var(--stroke);border-radius:999px;padding:.15rem .55rem;font-size:.82rem;margin-left:.35rem}
  </style>
</head>
<body>

<!-- HEADER (same as home) -->
<header class="site-header">
  <div class="container">
    <a href="index.html" class="logo"><img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="56"></a>
    <button class="hamburger" aria-label="Open menu" aria-controls="primary-nav" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
    <nav id="primary-nav" class="main-nav" aria-label="Primary">
      <a href="index.html">Home</a>
      <a href="ideas.html">Ideas</a>
      <a href="guides.html">Guides</a>
      <a href="workouts.html" aria-current="page">Workouts</a>
      <a href="nutrition.html">Nutrition</a>
      <a href="wellbeing.html">Wellbeing</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</header>

<!-- HERO -->
<header class="hero-mini" role="banner" aria-label="Workouts hero">
  <figure>
    <img src="img/workouts-hero.jpg" alt="Home workout setting with mat and dumbbells" onerror="this.src='img/hero.jpg'">
    <div class="overlay" aria-hidden="true"></div>
  </figure>
  <div class="content wrap">
    <h1><span class="accent">Workouts that fit life</span></h1>
    <p>Clear plans, form videos, anatomy diagrams, and audible timers. Train smart at home with dumbbells, bands, or bodyweight.</p>
  </div>
</header>

<main class="wrap">
  <p class="lead">Pick your <strong>goal</strong>, <strong>difficulty</strong>, and <strong>equipment</strong>. Plans update instantly. Tap a tile to play the clip. If a video is blocked, use “Open on YouTube” or “Search”.</p>

  <!-- Global controls -->
  <div class="toolbar" aria-label="Workout controls">
    <span class="label">Goal</span>
    <div class="seg" role="tablist" aria-label="Goal">
      <button role="tab" aria-pressed="true"  data-goal="maintain">Maintain</button>
      <button role="tab" aria-pressed="false" data-goal="cut">Cut</button>
      <button role="tab" aria-pressed="false" data-goal="build">Build</button>
      <button role="tab" aria-pressed="false" data-goal="transform">Transform</button>
    </div>

    <span class="label" style="margin-left:.6rem">Difficulty</span>
    <div class="seg" role="tablist" aria-label="Difficulty">
      <button role="tab" aria-pressed="true"  data-level="beginner">Beginner</button>
      <button role="tab" aria-pressed="false" data-level="intermediate">Intermediate</button>
      <button role="tab" aria-pressed="false" data-level="advanced">Advanced</button>
    </div>

    <span class="label equip-label" style="margin-left:.6rem">Equipment</span>
    <div class="equip" aria-label="Equipment filters">
      <span class="pill"><input type="checkbox" id="f-db" checked>   <label for="f-db">Dumbbells</label></span>
      <span class="pill"><input type="checkbox" id="f-band" checked> <label for="f-band">Bands</label></span>
      <span class="pill"><input type="checkbox" id="f-bw" checked>   <label for="f-bw">Bodyweight</label></span>
      <span class="pill"><input type="checkbox" id="f-rack">         <label for="f-rack">Rack / Door anchor</label></span>
    </div>
  </div>

  <!-- Goal explainer -->
  <section class="section" aria-labelledby="goal-explain">
    <h2 id="goal-explain">What do these goals mean?</h2>
    <div class="goals">
      <div class="row">
        <h3>Maintain<span class="badge">Balance</span></h3>
        <p class="meta">Keep strength and fitness steady with moderate sets/reps and comfortable rest. Great during busy weeks or between phases.</p>
      </div>
      <div class="row">
        <h3>Cut<span class="badge">Fat loss</span></h3>
        <p class="meta">Slightly higher reps, shorter rests, and optional finishers or brisk walks. Purpose: burn more calories while preserving muscle.</p>
      </div>
      <div class="row">
        <h3>Build (Bulk)<span class="badge">Muscle gain</span></h3>
        <p class="meta">Lower–moderate reps with controlled tempo and longer rests (90–150s) on big lifts. Focus on progressive overload and recovery.</p>
      </div>
      <div class="row">
        <h3>Transform<span class="badge">Recomposition</span></h3>
        <p class="meta">Circuit feel with minimal rests and mixed patterns. Goal: improve muscle, fitness, and body comp together. Keep form pristine.</p>
      </div>
    </div>
  </section>

  <!-- Weekly split -->
  <div class="section">
    <h2>Weekly Split</h2>
    <div class="plan" id="plan"></div>
    <p class="meta">Short on time? Do the <strong>Full-Body</strong> day 2–3×/week with a walk or mobility between.</p>
    <p class="meta muted" id="goal-note"></p>
  </div>

  <!-- Calisthenics -->
  <div class="section">
    <h2>Calisthenics Progressions</h2>
    <div class="plan" id="cal"></div>
    <p class="meta">Progress when all reps are clean, with full range and no pain.</p>
  </div>

  <!-- Library -->
  <div class="section" id="library">
    <h2>Form Library (watch & copy)</h2>
    <div class="grid" id="lib"></div>
  </div>

  <section class="section">
    <h2>Important Note</h2>
    <p>The content on FreeFitFuel is for general fitness education only and isn’t a substitute for personalised medical advice. Consult a qualified professional before starting a new programme, especially if you have any health conditions or injuries. Stop any exercise that causes sharp pain, dizziness, chest pain, or unusual shortness of breath.</p>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
    <p>© 2025 FreeFitFuel · All rights reserved.</p>
    <p class="credit">Created by Grant Cameron Anthony</p>
  </div>
</footer>

<script>
/* ===== Header burger ===== */
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.querySelector('.hamburger');
  const nav = document.querySelector('.main-nav');
  if(btn && nav){
    btn.addEventListener('click', () => {
      const open = btn.classList.toggle('active');
      nav.classList.toggle('open', open);
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  }
});

/* ===== Data ===== */
/* Anatomy PNGs should be in /img/anatomy/ using your granular names. */

const EX = [
  /* ========= PUSH ========= */
  {k:'pushup',  n:'Push-up',                cat:'push',  eq:'bw',   yt:'IODxDxX7oi4',   muscles:['muscles-front-chest-pecs.png','muscles-back-triceps-long.png','muscles-front-deltoids-front.png']},
  {k:'dbfloor', n:'DB Floor Press',         cat:'push',  eq:'db',   yt:'Y-s9AyDhs4I',   muscles:['muscles-front-chest-pecs.png','muscles-back-triceps-long.png','muscles-front-deltoids-front.png']},
  {k:'dbbench', n:'DB Bench Press',         cat:'push',  eq:'db',   yt:'gRVjAtPip0Y',   muscles:['muscles-front-chest-pecs.png','muscles-back-triceps-long.png','muscles-front-deltoids-front.png']},
  {k:'arnold',  n:'Arnold Press',           cat:'push',  eq:'db',   yt:'3ml7BH7mNwQ',   muscles:['muscles-front-deltoids-front.png','muscles-front-deltoids-mid.png','muscles-back-deltoids-rear.png']},
  {k:'latraise',n:'Lateral Raise',          cat:'push',  eq:'db',   yt:'3VcKaXpzqRo',   muscles:['muscles-front-deltoids-mid.png']},
  {k:'thruster',n:'DB Thruster',            cat:'push',  eq:'db',   yt:'QZEqB6wUPxQ',   muscles:['muscles-front-deltoids-mid.png','muscles-front-quads-rectus.png','muscles-back-glutes-maximus.png']},

  /* Bands – Push */
  {k:'b-chest', n:'Band Chest Press',       cat:'push',  eq:'band', yt:'POx0bVn823Q',   muscles:['muscles-front-chest-pecs.png','muscles-front-deltoids-front.png','muscles-back-triceps-long.png']},
  {k:'b-ohp',   n:'Band Overhead Press',    cat:'push',  eq:'band', yt:'DXSG5qLzZCw',   muscles:['muscles-front-deltoids-front.png','muscles-front-deltoids-mid.png','muscles-back-triceps-lateral.png']},
  {k:'b-fly',   n:'Band Fly',               cat:'push',  eq:'band', yt:'UpyX0O740Gg',   muscles:['muscles-front-chest-pecs.png','muscles-front-deltoids-front.png']},
  {k:'b-kb',    n:'Band Triceps Kickback',  cat:'push',  eq:'band', yt:'RGqznhXhtJE',   muscles:['muscles-back-triceps-long.png','muscles-back-triceps-lateral.png','muscles-back-triceps-medial.png']},

  /* ========= PULL ========= */
  {k:'bandrow', n:'Band Row',               cat:'pull',  eq:'band', yt:'uUjQ0n0J1sE',   muscles:['muscles-back-lats-upper.png','muscles-back-rhomboids.png','muscles-back-deltoids-rear.png']},
  {k:'doorrow', n:'Doorway Row',            cat:'pull',  eq:'bw',   yt:'c0G3N5aV5lY',   muscles:['muscles-back-lats-upper.png','muscles-back-rhomboids.png','muscles-back-deltoids-rear.png']},
  {k:'bandlat', n:'Band Lat Pulldown',      cat:'pull',  eq:'band', yt:'f4ZkQem6FGo',   muscles:['muscles-back-lats-upper.png','muscles-back-lats-lower.png','muscles-front-biceps-long.png']},
  {k:'anchorpd',n:'Door Anchor Pull-down',  cat:'pull',  eq:'band', yt:'h2f_v6v3OQI',   muscles:['muscles-back-lats-upper.png','muscles-front-biceps-long.png']},
  {k:'chin',    n:'Chin-up (band assist)',  cat:'pull',  eq:'rack', yt:'z9x2rYc4qYI',   muscles:['muscles-back-lats-upper.png','muscles-front-biceps-long.png']},
  {k:'csrow',   n:'Chest-Supported DB Row', cat:'pull',  eq:'db',   yt:'wzj8gBqGxF4',   muscles:['muscles-back-lats-upper.png','muscles-back-rhomboids.png','muscles-back-deltoids-rear.png']},
  {k:'renrow',  n:'Renegade Row',           cat:'pull',  eq:'db',   yt:'R5rj8m9r-1g',   muscles:['muscles-back-lats-upper.png','muscles-back-rhomboids.png','muscles-front-abs-lower.png']},
  {k:'zott',    n:'Zottman Curl',           cat:'pull',  eq:'db',   yt:'l0gDqsSUtWo',   muscles:['muscles-front-biceps-long.png','muscles-front-biceps-short.png','muscles-front-forearms-flexors.png']},
  {k:'b-curl',  n:'Band Biceps Curl',       cat:'pull',  eq:'band', yt:'PXLF19Oqe3M',   muscles:['muscles-front-biceps-short.png','muscles-front-biceps-long.png','muscles-front-forearms-flexors.png']},
  {k:'b-hcurl', n:'Band Hammer Curl',       cat:'pull',  eq:'band', yt:'SniJo-6t7Gk',   muscles:['muscles-front-biceps-long.png','muscles-back-forearms-extensors.png']},
  {k:'b-face',  n:'Band Face Pull',         cat:'pull',  eq:'band', yt:'uX5W2kynMIo',   muscles:['muscles-back-deltoids-rear.png','muscles-back-traps-mid.png','muscles-back-rhomboids.png']},
  {k:'b-rfly',  n:'Band Reverse Fly',       cat:'pull',  eq:'band', yt:'cyihFNmsq-A',   muscles:['muscles-back-deltoids-rear.png','muscles-back-traps-mid.png']},

  /* ========= LEGS & CORE ========= */
  {k:'stepup',  n:'Step-up',                cat:'legs',  eq:'db',   yt:'yQ0Z5zq2mTw',   muscles:['muscles-front-quads-rectus.png','muscles-back-glutes-maximus.png','muscles-back-hamstrings-biceps-femoris.png']},
  {k:'dbrdl',   n:'DB Romanian Deadlift',   cat:'legs',  eq:'db',   yt:'v0QZrS5rG9A',   muscles:['muscles-back-hamstrings-biceps-femoris.png','muscles-back-hamstrings-semitendinosus.png','muscles-back-erector-spinae.png']},
  {k:'sidepl',  n:'Side Plank',             cat:'core',  eq:'bw',   yt:'K2VljzCC16g',   muscles:['muscles-front-obliques-external.png','muscles-front-obliques-internal.png']},
  {k:'b-squat', n:'Band Squat',             cat:'legs',  eq:'band', yt:'6-86jEAXA08',   muscles:['muscles-front-quads-rectus.png','muscles-front-quads-vastus-lateral.png','muscles-front-quads-vastus-medial.png','muscles-back-glutes-maximus.png']},
  {k:'b-gm',    n:'Band Good Morning',      cat:'legs',  eq:'band', yt:'l3yV9pQxjF8',   muscles:['muscles-back-hamstrings-biceps-femoris.png','muscles-back-hamstrings-semitendinosus.png','muscles-back-erector-spinae.png','muscles-back-glutes-maximus.png']},
  {k:'b-walks', n:'Band Lateral Walks',     cat:'legs',  eq:'band', yt:'g8r3cYb2cM0',   muscles:['muscles-back-glutes-maximus.png']},
  {k:'b-ext',   n:'Band Leg Extension',     cat:'legs',  eq:'band', yt:'d8eg6t1i6Qc',   muscles:['muscles-front-quads-rectus.png','muscles-front-quads-vastus-lateral.png','muscles-front-quads-vastus-medial.png']},
  {k:'b-curl',  n:'Band Leg Curl (lying)',  cat:'legs',  eq:'band', yt:'8HhZzQ8mV-A',   muscles:['muscles-back-hamstrings-biceps-femoris.png','muscles-back-hamstrings-semitendinosus.png','muscles-back-hamstrings-semimembranosus.png']},
  {k:'b-calf',  n:'Band Calf Raise',        cat:'legs',  eq:'band', yt:'7eTDEyrnCxo',   muscles:['muscles-back-calves-gastrocnemius.png','muscles-back-calves-soleus.png']},

  /* ========= FULL BODY / SKILL ========= */
  {k:'manmaker',n:'Man Maker',              cat:'full',  eq:'db',   yt:'wV2bF1X8Y4M',   muscles:['muscles-front-abs-lower.png','muscles-front-deltoids-mid.png','muscles-front-chest-pecs.png']},
  {k:'dbcp',    n:'DB Clean & Press',       cat:'full',  eq:'db',   yt:'zQ6ZlJkFQ3E',   muscles:['muscles-front-deltoids-front.png','muscles-front-deltoids-mid.png','muscles-front-abs-upper.png']},
  {k:'hswall',  n:'Wall Handstand (beginner)',cat:'skill',eq:'bw',  yt:'tZyq3x1y9mQ',   muscles:['muscles-front-deltoids-front.png','muscles-front-deltoids-mid.png','muscles-back-triceps-long.png']},

  /* ========= CALISTHENICS LIB ========= */
  {k:'dipbench',n:'Bench Dip',              cat:'cal',   eq:'bw',   yt:'6kALZikXxLc',   muscles:['muscles-back-triceps-long.png','muscles-front-chest-pecs.png']},
  {k:'hollow',  n:'Hollow Body Hold',       cat:'cal',   eq:'bw',   yt:'o-qlBV4J6To',   muscles:['muscles-front-abs-lower.png','muscles-front-abs-upper.png']},
  {k:'lsit',    n:'L-sit (tuck → full)',    cat:'cal',   eq:'bw',   yt:'F3tGqV4wJ2E',   muscles:['muscles-front-abs-lower.png','muscles-front-hip-flexors.png']},
  {k:'pistol',  n:'Pistol Squat (progression)',cat:'cal',eq:'bw',   yt:'YlH3z9JvNlg',   muscles:['muscles-front-quads-rectus.png','muscles-back-glutes-maximus.png','muscles-back-hamstrings-biceps-femoris.png']}
];

/* prescriptions by group/level (base) */
const RX = {
  push:{
    beginner:[{k:'pushup',rx:'3×6–10'},{k:'dbfloor',rx:'3×8–12'},{k:'latraise',rx:'3×12–15',opt:true}],
    intermediate:[{k:'dbbench',rx:'4×6–10'},{k:'arnold',rx:'4×8–12'},{k:'latraise',rx:'3×12–15'}],
    advanced:[{k:'dbbench',rx:'5×5–8'},{k:'arnold',rx:'5×6–10'},{k:'thruster',rx:'4×10–12'}]
  },
  pull:{
    beginner:[{k:'bandrow',rx:'3×10–12'},{k:'b-curl',rx:'3×10–12'}],
    intermediate:[{k:'doorrow',rx:'4×8–12'},{k:'csrow',rx:'4×8–12'},{k:'zott',rx:'3×10–12'}],
    advanced:[{k:'chin',rx:'5×AMRAP'},{k:'csrow',rx:'5×6–10'},{k:'renrow',rx:'4×8–12'}]
  },
  legs:{
    beginner:[{k:'b-squat',rx:'3×10–15'},{k:'dbrdl',rx:'3×8–12'},{k:'b-walks',rx:'3×12–20/side'}],
    intermediate:[{k:'stepup',rx:'4×8–12'},{k:'dbrdl',rx:'4×6–10'},{k:'b-curl',rx:'3×10–15'}],
    advanced:[{k:'stepup',rx:'5×8–12'},{k:'dbrdl',rx:'5×6–8'},{k:'b-calf',rx:'4×12–20'}]
  },
  core:{
    beginner:[{k:'sidepl',rx:'3×20–30s/side'},{k:'hollow',rx:'3×20–30s'}],
    intermediate:[{k:'sidepl',rx:'4×30–45s/side'},{k:'hollow',rx:'4×30–45s'}],
    advanced:[{k:'sidepl',rx:'5×45–60s/side'},{k:'hollow',rx:'5×45–60s'}]
  },
  full:{
    beginner:[{k:'pushup',rx:'3×6–10'},{k:'bandrow',rx:'3×10–12'},{k:'b-squat',rx:'3×10–15'},{k:'sidepl',rx:'2×25–40s'}],
    intermediate:[{k:'dbbench',rx:'4×6–10'},{k:'csrow',rx:'4×8–12'},{k:'dbrdl',rx:'4×8–12'},{k:'dbcp',rx:'3×6–8'}],
    advanced:[{k:'dbcp',rx:'5×3–5'},{k:'dbbench',rx:'5×5–8'},{k:'csrow',rx:'5×6–10'},{k:'manmaker',rx:'4×8–10'}]
  }
};

/* Calisthenics progressions follow the chosen level */
const CAL = [
  {title:'Push', items:[
    {k:'pushup', rxB:'Incline push-up 3×8–12', rxI:'Flat push-up 4×8–12', rxA:'Feet-elevated / rings 5×6–10'},
    {k:'dipbench', rxB:'Bench dip 3×8–12', rxI:'Feet-elevated dip 4×8–12', rxA:'Parallel bar dip 5×6–10'}
  ]},
  {title:'Pull', items:[
    {k:'doorrow', rxB:'Table/door row 3×8–12', rxI:'Feet-elevated row 4×8–12', rxA:'Chin-up 5×AMRAP'}
  ]},
  {title:'Core', items:[
    {k:'hollow', rxB:'Hollow tuck 3×20–30s', rxI:'Hollow body 4×20–40s', rxA:'Hollow rocks 4×30–45s'},
    {k:'lsit', rxB:'Tuck L-sit 6×10–15s', rxI:'One-leg L-sit 6×10–15s', rxA:'Full L-sit 6×10–20s'}
  ]},
  {title:'Legs', items:[
    {k:'pistol', rxB:'Box pistol 3×6–10/leg', rxI:'Assisted pistol 4×6–10', rxA:'Pistol 5×5–8'}
  ]},
  {title:'Skills', items:[
    {k:'hswall', rxB:'Wall handstand hold 5×20–30s', rxI:'Shoulder taps 4×10/side', rxA:'Freestanding attempts 8–10×15s'}
  ]}
];

/* ===== State ===== */
let level = 'beginner';
let goal  = 'maintain';

/* ===== Controls ===== */
document.querySelectorAll('[data-level]').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('[data-level]').forEach(x=>x.setAttribute('aria-pressed','false'));
    b.setAttribute('aria-pressed','true');
    level = b.dataset.level;
    renderAll();
  });
});
document.querySelectorAll('[data-goal]').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('[data-goal]').forEach(x=>x.setAttribute('aria-pressed','false'));
    b.setAttribute('aria-pressed','true');
    goal = b.dataset.goal;
    renderAll();
  });
});
['f-db','f-band','f-bw','f-rack'].forEach(id=>{
  document.getElementById(id).addEventListener('change', renderAll);
});

/* ===== Helpers ===== */
function getFilters(){
  return {
    db: document.getElementById('f-db').checked,
    band: document.getElementById('f-band').checked,
    bw: document.getElementById('f-bw').checked,
    rack: document.getElementById('f-rack').checked
  };
}
function muscleList(ms){ return ms.map(x=>x.replace(/muscles-|front-|back-|\.png/gi,'').replace(/-/g,' ')).join(', '); }
function anatomy(ms){
  const imgs = ms.slice(0,3).map(m=>`<img src="img/anatomy/${m}" alt="${m} diagram" onerror="this.style.display='none'">`).join('');
  return `<div class="anatomy">${imgs}<div class="notes"><strong>Target:</strong> ${muscleList(ms)}</div></div>`;
}
function timerHTML(id){ return `
  <div class="timer" data-timer="${id}">
    <label for="t-${id}" class="visually-hidden">Timer (seconds)</label>
    <input id="t-${id}" type="number" min="5" step="5" value="60">
    <button data-act="start">Start</button>
    <button data-act="stop">Stop</button>
    <span class="left" aria-live="polite">60s</span>
  </div>`; }
function exByKey(k){ return EX.find(x=>x.k===k); }
function goalNote(){
  const el = document.getElementById('goal-note');
  const map = {
    maintain:'Maintain: moderate sets, steady tempo, 60–90s rest.',
    cut:'Cut: higher reps, shorter rests, optional finishers or brisk walk after.',
    build:'Build: lower–moderate reps, controlled tempo, 90–150s rest on big moves.',
    transform:'Transform: circuit pace, minimal rest; keep form pristine.'
  };
  el.textContent = map[goal] || '';
}
/* tweak RX text by goal (visual hint only) */
function adjRx(text){
  if(goal==='cut')       return text + ' · short rest';
  if(goal==='build')     return text + ' · longer rest';
  if(goal==='transform') return text + ' · circuit pace';
  return text;
}

/* ===== Renderers ===== */
const planEl = document.getElementById('plan');
const calEl  = document.getElementById('cal');
const libEl  = document.getElementById('lib');

function renderPlan(){
  const f = getFilters(); planEl.innerHTML='';
  const groups = [
    ['push','Push Day · Chest • Shoulders • Triceps'],
    ['pull','Pull Day · Back • Biceps • Rear Delts'],
    ['legs','Legs Day · Quads • Glutes • Hamstrings • Calves'],
    ['core','Core Day · Abs • Obliques • Erectors'],
    ['full','Full-Body Combination']
  ];
  groups.forEach(([g,title])=>{
    const blk = document.createElement('div'); blk.className='block';
    blk.innerHTML = `<h3>${title}</h3>`;
    const list = document.createElement('div');
    (RX[g][level]||[]).forEach(it=>{
      const e = exByKey(it.k); if(!e) return;
      if(!f[e.eq]) return;
      const row = document.createElement('div'); row.className='mov';
      row.innerHTML = `<span class="name">${e.n}</span><span class="rx">${adjRx(it.rx)}</span>`;
      list.appendChild(row);
    });
    if(!list.children.length){
      const none = document.createElement('div');
      none.className='meta'; none.textContent='No exercises match the current equipment filters.';
      blk.appendChild(none);
    } else {
      blk.appendChild(list);
    }
    blk.insertAdjacentHTML('beforeend', timerHTML('tm-'+g));
    planEl.appendChild(blk);
  });
  goalNote();
  hookTimers();
}

function renderCal(){
  const f = getFilters(); calEl.innerHTML='';
  CAL.forEach(col=>{
    const b = document.createElement('div'); b.className='block'; b.innerHTML=`<h3>${col.title}</h3>`;
    col.items.forEach(it=>{
      const e = exByKey(it.k); if(!e) return;
      if(!f[e.eq]) return;
      const rx = level==='beginner'?it.rxB:level==='intermediate'?it.rxI:it.rxA;
      const row = document.createElement('div'); row.className='mov';
      row.innerHTML = `<span class="name">${e.n}</span><span class="rx">${adjRx(rx)}</span>`;
      b.appendChild(row);
    });
    if(b.children.length===1){
      const none = document.createElement('div');
      none.className='meta'; none.textContent='No matching options for the current equipment filters.';
      b.appendChild(none);
    }
    b.insertAdjacentHTML('beforeend', timerHTML('cal-'+col.title));
    calEl.appendChild(b);
  });
  hookTimers();
}

function renderLibrary(){
  const f = getFilters(); libEl.innerHTML='';
  EX.forEach(e=>{
    if(!f[e.eq]) return;
    const card = document.createElement('article'); card.className='card';
    const thumb = e.yt ? `https://img.youtube.com/vi/${e.yt}/hqdefault.jpg` : 'img/video-fallback.jpg';
    card.innerHTML = `
      <h4>${e.n}</h4>
      <div class="tile" data-yt="${e.yt||''}">
        <img class="thumb" src="${thumb}" alt="${e.n} thumbnail" loading="lazy">
        <button class="play" aria-label="Play ${e.n}">
          <svg width="72" height="72" viewBox="0 0 72 72" fill="none" aria-hidden="true">
            <circle cx="36" cy="36" r="34" stroke="white" stroke-opacity=".85" stroke-width="3"/>
            <polygon points="30,24 52,36 30,48" fill="white" />
          </svg>
        </button>
        <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                title="${e.n} form video"></iframe>
        <div class="openers">
          <a href="${e.yt ? 'https://www.youtube.com/watch?v='+e.yt : 'https://www.youtube.com/results?search_query='+encodeURIComponent(e.n+' exercise form')}" target="_blank" rel="noopener">Open on YouTube</a>
          <a href="https://www.youtube.com/results?search_query=${encodeURIComponent(e.n+' exercise form')}" target="_blank" rel="noopener">Search</a>
        </div>
      </div>
      <div class="tags">${e.muscles.map(m=>`<span class="tag">${m.replace(/muscles-|front-|back-|\.png/gi,'').replace(/-/g,' ')}</span>`).join('')}</div>
      ${anatomy(e.muscles)}
    `;
    libEl.appendChild(card);
  });

  libEl.querySelectorAll('.tile').forEach(tile=>{
    const id = tile.dataset.yt;
    const btn = tile.querySelector('.play');
    const iframe = tile.querySelector('iframe');
    btn.addEventListener('click', ()=>{
      if(id){
        iframe.src = 'https://www.youtube-nocookie.com/embed/'+id+'?rel=0&modestbranding=1&autoplay=1';
        iframe.style.display='block';
        btn.style.display='none';
      } else {
        const a = tile.querySelector('.openers a:last-child');
        if(a) a.click();
      }
    });
  });
}

/* ===== Audible timers (3-beep finish) ===== */
let audioCtx, unlocked=false;
function ensureAudio(){
  if(!audioCtx){ audioCtx = new (window.AudioContext||window.webkitAudioContext)(); }
  if(audioCtx.state==='suspended'){ audioCtx.resume(); }
  unlocked=true;
}
function beepAt(t, freq, dur){
  const o = audioCtx.createOscillator(), g = audioCtx.createGain();
  o.type='sine'; o.frequency.value=freq; g.gain.value=0.0001;
  o.connect(g); g.connect(audioCtx.destination);
  o.start(t); g.gain.exponentialRampToValueAtTime(0.22, t+.01);
  g.gain.exponentialRampToValueAtTime(0.0001, t+dur); o.stop(t+dur+.02);
}
function chime(){
  if(!unlocked) return;
  const now = audioCtx.currentTime;
  beepAt(now+0.00, 880, .15);
  beepAt(now+0.25, 880, .15);
  beepAt(now+0.55, 660, .25);
}
function hookTimers(){
  document.querySelectorAll('[data-timer]').forEach(box=>{
    const input = box.querySelector('input');
    const left  = box.querySelector('.left');
    let t=null, end=0;
    function fmt(s){ return s+'s'; }
    function tick(){
      const remain = Math.max(0, Math.ceil((end - Date.now())/1000));
      left.textContent = fmt(remain);
      if(remain<=0){ clearInterval(t); t=null; chime(); }
    }
    box.querySelector('[data-act="start"]').onclick = ()=>{
      if(!unlocked){ ensureAudio(); }
      const sec = Math.max(5, parseInt(input.value||'60',10));
      left.textContent = fmt(sec); end = Date.now()+sec*1000;
      clearInterval(t); t=setInterval(tick, 200);
    };
    box.querySelector('[data-act="stop"]').onclick = ()=>{ clearInterval(t); t=null; left.textContent = fmt(parseInt(input.value||'60',10)); };
  });
}

/* ===== Boot ===== */
function renderAll(){ renderPlan(); renderCal(); renderLibrary(); }
renderAll();
</script>
</body>
</html>
