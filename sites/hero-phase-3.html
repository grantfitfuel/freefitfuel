<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hero Training ‚Äî Phase 3 (Build)</title>
  <link rel="stylesheet" href="/style.css?v=40">
  <link rel="icon" type="image/svg+xml" href="/img/freefitfuel-logo.svg">
  <meta name="theme-color" content="#FF6A00">
  <style>
    /* Page-scope helpers (lean, relies on your global style.css) */
    .crumbs{display:flex;gap:.5rem;flex-wrap:wrap;margin:.5rem 0 1rem}
    .crumbs a{color:var(--inkdim);text-decoration:underline dotted}
    .phase-nav{display:flex;flex-wrap:wrap;gap:.5rem;margin:.4rem 0 1rem}
    .phase-nav a{border:1px solid var(--stroke);background:var(--glass);padding:.4rem .75rem;border-radius:999px}
    .phase-nav a[aria-current="page"]{background:rgba(255,255,255,.08)}
    .section{background:var(--glass);border:1px solid var(--stroke);border-radius:14px;margin:12px 0;padding:14px}
    .grid{display:grid;gap:12px}
    @media(min-width:960px){.grid{grid-template-columns:2fr 1fr}}
    .exercise{border:1px solid var(--stroke);border-radius:12px;padding:.75rem;background:#0f1318}
    .exercise h3{margin:.1rem 0 .4rem}
    .yt{display:inline-flex;align-items:center;gap:.45rem;border:1px solid var(--stroke);background:var(--glass);padding:.3rem .6rem;border-radius:999px;font-size:.9rem}
    .yt:hover{color:var(--accent)}
    table.log{width:100%;border-collapse:collapse;margin:.5rem 0}
    .log th,.log td{border:1px solid var(--stroke);padding:.45rem .5rem;text-align:left}
    .log input[type="number"], .log input[type="text"]{width:100%;background:#0b0f14;border:1px solid var(--stroke);border-radius:8px;padding:.35rem .45rem;color:var(--ink)}
    .actions{display:flex;gap:.5rem;flex-wrap:wrap;margin:.5rem 0}
    .timer{display:flex;gap:.35rem;align-items:center;flex-wrap:wrap}
    .timer input{width:88px;background:#0b0f14;border:1px solid var(--stroke);border-radius:8px;color:var(--ink);padding:.35rem .45rem}
    .badges{border:1px dashed var(--stroke);border-radius:12px;padding:.75rem;background:#0e1217}
    .badge{display:inline-block;background:#1a1f28;border:1px solid var(--stroke);border-radius:999px;padding:.28rem .6rem;margin:.18rem .18rem 0 0;font-size:.85rem}
    .pb{color:#FFCE6A}
    .milestone{color:#9bf0b1}
    .eyebrow{display:inline-block;border:1px solid var(--stroke);padding:.35rem .7rem;border-radius:999px;background:var(--glass)}
    .note{color:var(--inkdim);font-size:.92rem}
  </style>
</head>
<body>

<!-- Shared header -->
<div id="site-header"></div>
<script src="/js/header-loader.js"></script>

<header class="hero-mini" role="banner" aria-label="Hero Training Phase 3">
  <figure>
    <!-- Swap image path if needed -->
    <img src="/img/hero-training-phase3.jpg" alt="Mixed ages athletes: lifting and running">
    <div class="overlay" aria-hidden="true"></div>
  </figure>
  <div class="content wrap">
    <span class="eyebrow">Phase 3 ‚Ä¢ Weeks 17‚Äì28</span>
    <h1><span class="accent">Build ‚Äî Strength & Threshold</span></h1>
    <p class="lead">
      Progressive overload for strength (lower reps, heavier) + threshold endurance (comfortably hard).
      Log every set; use the rest timer; form links are next to each exercise.
    </p>
  </div>
</header>

<main class="wrap">
  <!-- Breadcrumbs + phase nav -->
  <nav class="crumbs" aria-label="Breadcrumb">
    <a href="/hero-training.html">Hero Training</a> ‚Ä∫ <span>Phase 3</span>
  </nav>
  <nav class="phase-nav" aria-label="Phases">
    <a href="/hero-phase-1.html">Phase 1</a>
    <a href="/hero-phase-2.html">Phase 2</a>
    <a href="/hero-phase-3.html" aria-current="page">Phase 3</a>
    <a href="/hero-phase-4.html">Phase 4</a>
  </nav>

  <!-- Weekly guidance -->
  <section class="section">
    <h2>Weekly Structure (pick days that suit)</h2>
    <ul>
      <li><strong>Mon ‚Äî Lower (Heavy):</strong> Back Squat, RDL, Split Squat + calf.</li>
      <li><strong>Tue ‚Äî Threshold Run:</strong> 10‚Äì20 min warm-up, 2√ó10‚Äì15 min @ ‚Äúcomfortably hard‚Äù, 5‚Äì10 min cool.</li>
      <li><strong>Thu ‚Äî Upper (Heavy):</strong> Bench Press or DB Press, Chin-up/Pull-up, Row, Overhead Press.</li>
      <li><strong>Sat ‚Äî Long Z2 Run:</strong> 75‚Äì90 min conversational, relaxed form.</li>
      <li><strong>2√ó Mobility:</strong> Hips & T-spine, 10‚Äì15 min sessions.</li>
    </ul>
    <p class="note">Overload = add a little weight or an extra rep/set once all sets land in the target rep range with good form.</p>
  </section>

  <section class="grid">
    <div>
      <!-- LOWER (Heavy) -->
      <article class="section">
        <h2>Lower ‚Äî Heavy</h2>

        <!-- Back Squat -->
        <div class="exercise" data-ex="p3_squat">
          <h3>Back Squat
            <a class="yt" href="https://www.youtube.com/results?search_query=back+squat+setup+and+form" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">Warm-up sets ‚Üí 4‚Äì5√ó3‚Äì6 @ RPE 7‚Äì8.5. Brace, depth consistent.</p>
          <table class="log" aria-label="Back Squat log">
            <thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead>
            <tbody></tbody>
          </table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="150" min="30" step="5"></label>
              <button data-act="start">Start</button>
              <button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button>
            <button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>

        <!-- Romanian Deadlift -->
        <div class="exercise" data-ex="p3_rdl">
          <h3>Romanian Deadlift (RDL)
            <a class="yt" href="https://www.youtube.com/results?search_query=romanian+deadlift+form+hip+hinge" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">3‚Äì4√ó5‚Äì8. Hips back, shins near vertical, hamstrings stretch, neutral spine.</p>
          <table class="log"><thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="120" min="30" step="5"></label>
              <button data-act="start">Start</button><button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button><button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>

        <!-- Split Squat -->
        <div class="exercise" data-ex="p3_split">
          <h3>DB Bulgarian Split Squat
            <a class="yt" href="https://www.youtube.com/results?search_query=bulgarian+split+squat+how+to" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">3√ó6‚Äì10/leg. Slight forward torso, knee tracks toes, full depth comfortably.</p>
          <table class="log"><thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="90" min="30" step="5"></label>
              <button data-act="start">Start</button><button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button><button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>
      </article>

      <!-- UPPER (Heavy) -->
      <article class="section">
        <h2>Upper ‚Äî Heavy</h2>

        <!-- Bench -->
        <div class="exercise" data-ex="p3_bench">
          <h3>Bench Press (or DB Press)
            <a class="yt" href="https://www.youtube.com/results?search_query=bench+press+form+setup" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">4√ó4‚Äì6. Shoulder blades set, forearms near vertical at the bottom.</p>
          <table class="log"><thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="150" min="30" step="5"></label>
              <button data-act="start">Start</button><button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button><button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>

        <!-- Chin-up / Pull-up -->
        <div class="exercise" data-ex="p3_chin">
          <h3>Chin-up / Pull-up (scale: band/negatives)
            <a class="yt" href="https://www.youtube.com/results?search_query=chin+up+progression+form" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">3‚Äì5√óAMRAP in good form (leave 1‚Äì2 reps in reserve). Add weight if ‚â•8 reps easy.</p>
          <table class="log"><thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="120" min="30" step="5"></label>
              <button data-act="start">Start</button><button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button><button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>

        <!-- Row -->
        <div class="exercise" data-ex="p3_row">
          <h3>Barbell or DB Row
            <a class="yt" href="https://www.youtube.com/results?search_query=barbell+row+form+pendlay+row" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">3‚Äì4√ó6‚Äì10. Neutral spine, elbows toward hip, squeeze mid-back.</p>
          <table class="log"><thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="90" min="30" step="5"></label>
              <button data-act="start">Start</button><button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button><button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>

        <!-- Overhead Press -->
        <div class="exercise" data-ex="p3_ohp">
          <h3>Overhead Press
            <a class="yt" href="https://www.youtube.com/results?search_query=overhead+press+strict+press+form" target="_blank" rel="noopener">üîé Form</a>
          </h3>
          <p class="meta">3‚Äì4√ó4‚Äì8. Glutes tight, ribs down, head through at top.</p>
          <table class="log"><thead><tr><th>Set</th><th>Reps</th><th>Weight (kg)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <div class="timer">
              <label>Rest (s) <input type="number" value="120" min="30" step="5"></label>
              <button data-act="start">Start</button><button data-act="stop">Stop</button>
              <span class="left note">0s</span>
            </div>
            <button data-act="save" class="btn--pill">Save set(s)</button><button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>
      </article>

      <!-- Mobility (Hips + T-spine) -->
      <article class="section">
        <h2>Mobility ‚Äî Hips & T-Spine (10‚Äì15 min)</h2>
        <ul class="meta">
          <li><a class="yt" href="https://www.youtube.com/results?search_query=90%2F90+hip+switch+mobility" target="_blank" rel="noopener">90/90 Hip Switch</a> ‚Äî 2√ó10 slow</li>
          <li><a class="yt" href="https://www.youtube.com/results?search_query=couch+stretch+how+to" target="_blank" rel="noopener">Couch Stretch</a> ‚Äî 2√ó40‚Äì60s/side</li>
          <li><a class="yt" href="https://www.youtube.com/results?search_query=quadruped+t+spine+rotation" target="_blank" rel="noopener">Quadruped T-Spine Rotations</a> ‚Äî 2√ó8/side</li>
          <li><a class="yt" href="https://www.youtube.com/results?search_query=thread+the+needle+thoracic+stretch" target="_blank" rel="noopener">Thread the Needle</a> ‚Äî 2√ó30‚Äì45s/side</li>
        </ul>
      </article>
    </div>

    <!-- Right column: Endurance + PBs -->
    <aside>
      <article class="section">
        <h2>Threshold Run (Guidance)</h2>
        <p class="meta">Warm-up 10‚Äì20 min easy ‚Üí 2√ó10‚Äì15 min @ ‚Äúcan talk in short phrases‚Äù ‚Üí 5‚Äì10 min cool.</p>
        <div class="exercise" data-ex="p3_thr_run">
          <h3>Record ‚Äî Threshold Block</h3>
          <p class="meta">Log distance/time for each threshold block (optional pace).</p>
          <table class="log"><thead><tr><th>Block</th><th>Time (min)</th><th>Distance (km)</th><th>Notes</th></tr></thead><tbody></tbody></table>
          <div class="actions">
            <button data-act="save" class="btn--pill">Save</button>
            <button data-act="history" class="btn--pill">Show history</button>
          </div>
          <div class="badges" aria-live="polite"></div>
        </div>
      </article>

      <article class="section">
        <h2>PBs & Badges</h2>
        <div id="pbPanel" class="badges">
          <span class="note">New personal bests and milestones appear here after you save.</span>
        </div>
        <p class="meta" style="margin-top:.5rem">Milestones: 10, 25, 50, 100 logged workouts.</p>
      </article>
    </aside>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <img src="/img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
    <p>¬© 2025 FreeFitFuel ¬∑ All rights reserved.</p>
    <p class="credit">Created by Grant Cameron Anthony</p>
  </div>
</footer>

<script>
/* ========= Local Log + PBs + Rest Timers (Phase 3) ========= */
(function(){
  const STORE_KEY = 'fff_p3_logs_v1';
  const PB_KEY    = 'fff_p3_pbs_v1';
  const WKT_KEY   = 'fff_total_workouts_v1';

  const $ = (sel,root=document)=>root.querySelector(sel);
  const $$ = (sel,root=document)=>Array.from(root.querySelectorAll(sel));

  const store = {
    get(k,def){ try{ return JSON.parse(localStorage.getItem(k)) ?? def; }catch{ return def; } },
    set(k,v){ localStorage.setItem(k, JSON.stringify(v)); }
  };

  function ensureRows(tbl){
    const tbody = $('tbody', tbl);
    if(!tbody) return;
    if(!tbody.children.length){
      for(let i=1;i<=5;i++){
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${i}</td>
          <td><input type="number" min="0" step="1" placeholder="reps"></td>
          <td><input type="number" min="0" step="0.5" placeholder="kg"></td>
          <td><input type="text" placeholder="notes"></td>`;
        tbody.appendChild(tr);
      }
    }
  }

  function loadAll(){
    $$('.log').forEach(ensureRows);
  }

  function toastBadges(box, msgs){
    const wrap = box.querySelector('.badges');
    if(!wrap) return;
    wrap.innerHTML = '';
    msgs.forEach(m=>{
      const span = document.createElement('span');
      span.className = 'badge ' + (m.type==='pb'?'pb':'milestone');
      span.textContent = m.text;
      wrap.appendChild(span);
    });
  }

  function saveExercise(exEl){
    const key = exEl.dataset.ex; if(!key) return;
    const tbl = $('.log', exEl); if(!tbl) return;
    const rows = $$('tbody tr', tbl).map(tr=>{
      const tds = $$('td', tr);
      return {
        set: tds[0].textContent.trim(),
        reps: $('input', tds[1]).value || '',
        kg: $('input', tds[2]).value || '',
        notes: $('input', tds[3]).value || ''
      };
    }).filter(r=>r.reps || r.kg || r.notes);

    const all = store.get(STORE_KEY, {});
    if(!all[key]) all[key] = [];
    const stamp = new Date().toISOString();
    all[key].push({ stamp, rows });
    store.set(STORE_KEY, all);

    // PB check (max kg * reps heuristic)
    const bests = store.get(PB_KEY, {});
    const todayBest = rows.reduce((m,r)=>Math.max(m, (parseFloat(r.kg)||0)* (parseFloat(r.reps)||0)), 0);
    let msgs = [];
    if(todayBest>0){
      if(!bests[key] || todayBest > bests[key]){
        bests[key] = todayBest;
        store.set(PB_KEY, bests);
        msgs.push({type:'pb', text:'New PB saved!'});
      } else {
        msgs.push({type:'pb', text:'Logged. Keep pushing.'});
      }
    } else {
      msgs.push({type:'pb', text:'Logged.'});
    }

    // Workout count milestone
    const total = (store.get(WKT_KEY,0) || 0) + 1;
    store.set(WKT_KEY, total);
    if([10,25,50,100].includes(total)){
      msgs.push({type:'milestone', text:`${total} workouts logged ‚Äî great consistency!`});
    }

    toastBadges(exEl, msgs);
    toastBadges($('#pbPanel').closest('.section'), msgs.filter(m=>m.type!=='pb').concat(msgs.filter(m=>m.type==='pb')));
  }

  function showHistory(exEl){
    const key = exEl.dataset.ex; if(!key) return;
    const all = store.get(STORE_KEY, {});
    const list = all[key]||[];
    const box = exEl.querySelector('.badges');
    if(!box) return;
    if(!list.length){ box.innerHTML = '<span class="note">No history yet.</span>'; return; }
    const out = document.createElement('div');
    out.className='meta';
    out.style.marginTop = '.35rem';
    out.innerHTML = list.slice(-5).reverse().map(entry=>{
      const d = new Date(entry.stamp);
      const when = d.toLocaleString();
      const rows = entry.rows.map(r=>`${r.set}: ${r.reps||'-'} reps @ ${r.kg||'-'} kg`).join(' ¬∑ ');
      return `<div>‚Ä¢ ${when} ‚Äî ${rows}</div>`;
    }).join('');
    box.innerHTML = '';
    box.appendChild(out);
  }

  function hookExercise(exEl){
    const tbl = $('.log', exEl); ensureRows(tbl);

    const timerBox = exEl.querySelector('.timer');
    if(timerBox){
      const input = $('input[type="number"]', timerBox);
      const left  = $('.left', timerBox);
      let t = null, end = 0;

      function tick(){
        const r = Math.max(0, Math.ceil((end - Date.now())/1000));
        left.textContent = r + 's';
        if(r<=0){ clearInterval(t); t=null; left.textContent='0s'; }
      }
      $('[data-act="start"]', timerBox).addEventListener('click', ()=>{
        const sec = Math.max(10, parseInt(input.value||'60',10));
        end = Date.now()+sec*1000;
        clearInterval(t); t=setInterval(tick, 200);
      });
      $('[data-act="stop"]', timerBox).addEventListener('click', ()=>{
        clearInterval(t); t=null; left.textContent='0s';
      });
    }

    $('[data-act="save"]', exEl).addEventListener('click', ()=>saveExercise(exEl));
    $('[data-act="history"]', exEl).addEventListener('click', ()=>showHistory(exEl));
  }

  function boot(){
    loadAll();
    $$('.exercise').forEach(hookExercise);
  }
  document.addEventListener('DOMContentLoaded', boot);
})();
</script>
</body>
</html>
