<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Workouts â€” FreeFitFuel</title>

  <link rel="stylesheet" href="style.css?v=24">
  <link rel="icon" type="image/svg+xml" href="img/freefitfuel-logo.svg">

  <style>
    /* Page-only additions (keeps your global style.css intact) */
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px 20px}
    .lead{color:var(--inkdim)}

    /* HERO */
    header.hero-mini{position:relative;border-bottom:1px solid #1b1b22}
    header.hero-mini figure{margin:0;position:relative}
    header.hero-mini img{width:100%;height:46vh;min-height:320px;object-fit:cover;display:block;filter:brightness(.88) saturate(1.05)}
    header.hero-mini .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.65))}
    /* ðŸ‘‡ Key change: put hero text BELOW the image */
    header.hero-mini .content{position:static;inset:auto;padding:16px 20px 22px;max-width:var(--maxw);margin:0 auto}
    header.hero-mini h1{margin:0 0 .35rem}
    header.hero-mini p{max-width:70ch;margin:.2rem 0 0;color:#d0d0da}

    /* Toolbar */
    .toolbar{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;margin:1rem 0 1.1rem}
    .seg{display:inline-flex;border:1px solid var(--stroke);border-radius:999px;overflow:hidden}
    .seg button{background:var(--glass);color:var(--ink);border:0;padding:.45rem .85rem;cursor:pointer}
    .seg button[aria-pressed="true"]{background:var(--accent);color:#111;font-weight:800}
    .equip{display:flex;align-items:center;gap:.45rem;flex-wrap:wrap;margin-left:auto}
    .equip .label{opacity:.9}
    .pill{display:inline-flex;align-items:center;gap:.35rem;background:var(--glass);border:1px solid var(--stroke);border-radius:999px;padding:.35rem .65rem;font-size:.92rem}
    .pill input{accent-color:var(--accent)}

    /* Sections & blocks */
    .section{background:var(--glass);border:1px solid var(--stroke);border-radius:14px;margin:12px 0;padding:14px}
    .section>h2{margin:.15rem 0 .45rem;font-size:1.2rem}
    .plan{display:grid;gap:12px}
    @media (min-width:780px){.plan{grid-template-columns:repeat(2,1fr)}}
    .block{background:#111418;border:1px solid var(--stroke);border-radius:12px;padding:12px}
    .block h3{margin:.1rem 0 .35rem;font-size:1.05rem}

    /* Movement rows + logging drawer */
    .mov{border:1px dashed var(--stroke);border-radius:10px;padding:.55rem .6rem;margin:.45rem 0}
    .mov-head{display:flex;gap:.6rem;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .mov-title a{color:var(--ink);text-decoration:underline dotted}
    .mov-title a:hover{color:var(--accent)}
    .rx{opacity:.9}
    .mov-tools{display:flex;gap:.4rem;align-items:center}
    .btn-sm{border:1px solid var(--stroke);background:var(--glass);color:var(--ink);padding:.35rem .6rem;border-radius:8px;cursor:pointer}
    .drawer{display:none;margin:.45rem 0 0}
    .drawer.open{display:block}
    .log-grid{display:grid;gap:.35rem}
    .log-row{display:grid;grid-template-columns:80px 1fr 1fr 1fr auto;gap:.35rem;align-items:center}
    .log-row input{background:#0b0f14;border:1px solid var(--stroke);border-radius:8px;color:var(--ink);padding:.35rem .45rem}
    .meta-row{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;margin-top:.35rem}
    .meta-row .pb{color:#90ee90}
    .meta-row .badge{border:1px solid var(--stroke);border-radius:999px;padding:.2rem .5rem;background:rgba(255,255,255,.06)}
    .quote{font-size:.92rem;color:var(--inkdim);margin-top:.25rem}

    /* Export/import */
    .backup{display:flex;flex-wrap:wrap;gap:.5rem;margin:.6rem 0 0}
    .backup .btn-sm{white-space:nowrap}
  </style>
</head>
<body>
  <!-- Shared header -->
  <div id="site-header"></div>
  <script src="/js/header-loader.js" defer></script>

  <!-- HERO -->
  <header class="hero-mini" role="banner" aria-label="Workouts hero">
    <figure>
      <img src="img/curl.jpg" alt="Seated dumbbell curl at home">
      <div class="overlay" aria-hidden="true"></div>
    </figure>
    <div class="content wrap">
      <h1><span class="accent">Workouts that fit life</span></h1>
      <p class="lead">Clear plans with clickable form lookups, personal logging, badges and gentle nudges. Train smart with dumbbells, bands or bodyweight.</p>
    </div>
  </header>

  <main class="wrap">
    <p class="lead">Pick your <strong>difficulty</strong>, <strong>goal</strong> and <strong>equipment</strong>. Titles open a YouTube search for form. Your logs stay on this device (with export/import backup).</p>

    <!-- ===== Controls ===== -->
    <div class="toolbar" aria-label="Workout controls">
      <!-- Difficulty -->
      <div class="seg" role="tablist" aria-label="Difficulty">
        <button role="tab" aria-pressed="true"  data-level="beginner">Beginner</button>
        <button role="tab" aria-pressed="false" data-level="intermediate">Intermediate</button>
        <button role="tab" aria-pressed="false" data-level="advanced">Advanced</button>
      </div>

      <!-- Goals -->
      <div class="seg" role="tablist" aria-label="Goal" style="margin-left:.5rem">
        <button role="tab" aria-pressed="true"  data-goal="maintain">Maintain</button>
        <button role="tab" aria-pressed="false" data-goal="cut">Cut</button>
        <button role="tab" aria-pressed="false" data-goal="build">Build</button>
        <button role="tab" aria-pressed="false" data-goal="transform">Transform</button>
      </div>

      <!-- Equipment -->
      <div class="equip" aria-label="Equipment filters">
        <span class="label">Equipment:</span>
        <span class="pill"><input type="checkbox" id="f-db"   checked> <label for="f-db">Dumbbells</label></span>
        <span class="pill"><input type="checkbox" id="f-band" checked> <label for="f-band">Bands</label></span>
        <span class="pill"><input type="checkbox" id="f-bw"   checked> <label for="f-bw">Bodyweight</label></span>
        <span class="pill"><input type="checkbox" id="f-rack"> <label for="f-rack">Bar / Door anchor</label></span>
        <span class="pill"><input type="checkbox" id="f-rings"><label for="f-rings">Rings</label></span>
      </div>
    </div>

    <!-- Backup -->
    <div class="backup" aria-label="Backup controls">
      <button class="btn-sm" id="btnExport">Export logs (.json)</button>
      <label class="btn-sm" for="importFile" style="cursor:pointer">Import logs</label>
      <input id="importFile" type="file" accept="application/json" style="display:none">
      <span class="meta">Tip: export occasionally to guard against browser cleanup.</span>
    </div>

    <!-- ===== Weekly Split (Chunk 1) ===== -->
    <section class="section">
      <h2>Weekly Split</h2>
      <div id="plan" class="plan"></div>
      <p class="meta">Short on time? Run the <strong>Full-Body</strong> day 2â€“3Ã—/week and sprinkle easy cardio or mobility between.</p>
    </section>

    <!-- (Chunk 2 will add Calisthenics Progressions here) -->
    <!-- (Chunk 3 will add Cross-Training Circuits here) -->

    <!-- Disclaimer -->
    <section class="section">
      <h2>Important Note</h2>
      <p>The content on FreeFitFuel is for general fitness education only and isnâ€™t a substitute for personalised medical advice. Consult a qualified professional before starting a new programme, especially if you have any health conditions or injuries. Stop any exercise that causes sharp pain, dizziness, chest pain, or unusual shortness of breath.</p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
      <p>Â© 2025 FreeFitFuel Â· All rights reserved.</p>
      <p class="credit">Created by Grant Cameron Anthony</p>
    </div>
  </footer>

  <script>
  /* ========= DATA (no trademarked names; every exercise is standalone) ========= */
  const EXERCISES = [
    /* PUSH */
    {k:'pushup',  n:'Push-up',                        eq:'bw',   yt:'push up form'},
    {k:'dbfloor', n:'Dumbbell Floor Press',           eq:'db',   yt:'dumbbell floor press form'},
    {k:'dbbench', n:'Dumbbell Bench Press',           eq:'db',   yt:'dumbbell bench press form'},
    {k:'latraise',n:'Lateral Raise',                  eq:'db',   yt:'lateral raise form'},
    {k:'ohpress', n:'Dumbbell Overhead Press',        eq:'db',   yt:'standing dumbbell overhead press form'},

    /* PULL */
    {k:'bandrow', n:'Band Row',                       eq:'band', yt:'resistance band row form'},
    {k:'doorrow', n:'Door/Table Row',                 eq:'bw',   yt:'bodyweight row at home form'},
    {k:'bandlat', n:'Band Lat Pulldown',              eq:'band', yt:'band lat pulldown form'},
    {k:'csrow',   n:'Chest-Supported DB Row',         eq:'db',   yt:'chest supported dumbbell row form'},
    {k:'chin',    n:'Chin-up (assisted if needed)',   eq:'rack', yt:'chin up progression form'},

    /* LEGS / CORE */
    {k:'stepup',  n:'Step-up',                        eq:'db',   yt:'dumbbell step up form'},
    {k:'dbrdl',   n:'Dumbbell Romanian Deadlift',     eq:'db',   yt:'dumbbell romanian deadlift form'},
    {k:'split',   n:'Split Squat / Bulgarian',        eq:'db',   yt:'bulgarian split squat form'},
    {k:'sidepl',  n:'Side Plank',                     eq:'bw',   yt:'side plank form'},

    /* FULL BODY */
    {k:'dbcp',    n:'DB Clean & Press',               eq:'db',   yt:'dumbbell clean and press form'},
    {k:'manmaker',n:'Man Maker',                      eq:'db',   yt:'dumbbell man maker form'}
  ];

  /* Prescriptions per day by level (each item is a single, ungrouped movement) */
  const PLAN = {
    push:{
      beginner:     [{k:'pushup',rx:'3Ã—6â€“10'},{k:'dbfloor',rx:'3Ã—8â€“12'},{k:'latraise',rx:'3Ã—12â€“15'}],
      intermediate: [{k:'dbbench',rx:'4Ã—6â€“10'},{k:'ohpress',rx:'4Ã—6â€“10'},{k:'latraise',rx:'3Ã—12â€“15'}],
      advanced:     [{k:'dbbench',rx:'5Ã—5â€“8'},{k:'ohpress',rx:'5Ã—6â€“8'},{k:'latraise',rx:'4Ã—12â€“15'}]
    },
    pull:{
      beginner:     [{k:'doorrow',rx:'3Ã—8â€“12'},{k:'bandrow',rx:'3Ã—10â€“12'}],
      intermediate: [{k:'csrow',rx:'4Ã—8â€“12'},{k:'bandlat',rx:'4Ã—10â€“12'}],
      advanced:     [{k:'chin',rx:'5Ã—AMRAP'},{k:'csrow',rx:'5Ã—6â€“10'}]
    },
    legs:{
      beginner:     [{k:'stepup',rx:'3Ã—8â€“12'},{k:'dbrdl',rx:'3Ã—8â€“12'},{k:'sidepl',rx:'2Ã—25â€“40s'}],
      intermediate: [{k:'stepup',rx:'4Ã—8â€“12'},{k:'dbrdl',rx:'4Ã—6â€“10'},{k:'split',rx:'3Ã—8â€“12/leg'}],
      advanced:     [{k:'stepup',rx:'5Ã—8â€“12'},{k:'dbrdl',rx:'5Ã—6â€“8'},{k:'split',rx:'4Ã—8â€“12/leg'}]
    },
    full:{
      beginner:     [{k:'pushup',rx:'3Ã—6â€“10'},{k:'bandrow',rx:'3Ã—10â€“12'},{k:'stepup',rx:'3Ã—8â€“12'},{k:'sidepl',rx:'2Ã—25â€“40s'}],
      intermediate: [{k:'dbbench',rx:'4Ã—6â€“10'},{k:'csrow',rx:'4Ã—8â€“12'},{k:'dbrdl',rx:'4Ã—8â€“12'},{k:'dbcp',rx:'3Ã—6â€“8'}],
      advanced:     [{k:'dbcp',rx:'5Ã—3â€“5'},{k:'dbbench',rx:'5Ã—5â€“8'},{k:'csrow',rx:'5Ã—6â€“10'},{k:'manmaker',rx:'4Ã—8â€“10'}]
    }
  };

  const QUOTES = [
    "Small wins compound. Log the set, own the day.",
    "Perfect form, steady breath, then add a little.",
    "Consistency beats intensity when intensity is inconsistent.",
    "One clean rep better than five messy ones.",
    "Show up. Scale smart. Keep going."
  ];

  const NS = 'fff.workouts.v1.'; // localStorage namespace

  /* ========= State / Controls ========= */
  let level = 'beginner';
  let goal  = 'maintain';

  document.querySelectorAll('.seg [data-level]').forEach(b=>{
    b.addEventListener('click', ()=>{
      document.querySelectorAll('.seg [data-level]').forEach(x=>x.setAttribute('aria-pressed','false'));
      b.setAttribute('aria-pressed','true');
      level = b.dataset.level;
      renderPlan();
    });
  });

  document.querySelectorAll('.seg [data-goal]').forEach(b=>{
    b.addEventListener('click', ()=>{
      document.querySelectorAll('.seg [data-goal]').forEach(x=>x.setAttribute('aria-pressed','false'));
      b.setAttribute('aria-pressed','true');
      goal = b.dataset.goal;
      renderPlan();
    });
  });

  ['f-db','f-band','f-bw','f-rack','f-rings'].forEach(id=>{
    const el = document.getElementById(id);
    if(el) el.addEventListener('change', renderPlan);
  });

  function filters(){
    return {
      db: document.getElementById('f-db').checked,
      band: document.getElementById('f-band').checked,
      bw: document.getElementById('f-bw').checked,
      rack: document.getElementById('f-rack').checked,
      rings: document.getElementById('f-rings').checked
    };
  }

  function exByKey(k){ return EXERCISES.find(e=>e.k===k); }
  function ytSearchURL(term){ return 'https://www.youtube.com/results?search_query='+encodeURIComponent(term); }

  /* Goal tweaks (light touch) */
  function applyGoal(rx){
    if(goal==='cut')       return rx+' Â· short rests';
    if(goal==='build')     return rx.replace(/(\d+)Ã—/,(m,n)=>(+n+1)+'Ã—')+' Â· add load';
    if(goal==='transform') return rx+' + finisher';
    return rx;
  }

  /* ========= Rendering: Weekly Split ========= */
  const planEl = document.getElementById('plan');

  function renderPlan(){
    const f = filters();
    planEl.innerHTML = '';
    const groups = [
      ['push', 'Push Day'],
      ['pull', 'Pull Day'],
      ['legs', 'Legs / Core Day'],
      ['full', 'Full-Body Day']
    ];

    groups.forEach(([key,label])=>{
      const blk = document.createElement('div'); blk.className='block';
      blk.innerHTML = `<h3>${label}</h3>`;
      PLAN[key][level].forEach(item=>{
        const e = exByKey(item.k); if(!e) return;
        if(!f[e.eq]) return;

        // Row
        const row = document.createElement('div'); row.className='mov';
        row.innerHTML = `
          <div class="mov-head">
            <div class="mov-title">
              <a href="${ytSearchURL(e.yt)}" target="_blank" rel="noopener" title="YouTube form search">${e.n}</a>
            </div>
            <div class="rx">${applyGoal(item.rx)}</div>
            <div class="mov-tools">
              <button class="btn-sm" data-open>Log</button>
              <button class="btn-sm" data-clear title="Clear this exerciseâ€™s saved data">Clear</button>
            </div>
          </div>
          <div class="drawer" data-drawer>
            <div class="log-grid" data-log>
              ${[1,2,3,4,5].map(i=>`
                <div class="log-row">
                  <strong>Set ${i}</strong>
                  <input inputmode="decimal" placeholder="kg"   data-field="w${i}">
                  <input inputmode="numeric" placeholder="reps" data-field="r${i}">
                  <input placeholder="notes" data-field="n${i}">
                  <button class="btn-sm" data-save>Save</button>
                </div>
              `).join('')}
            </div>
            <div class="meta-row">
              <span class="pb" data-pb></span>
              <span class="badge" data-badge></span>
            </div>
            <div class="quote" data-quote></div>
          </div>
        `;

        // Wire drawer & storage
        const drawer = row.querySelector('[data-drawer]');
        row.querySelector('[data-open]').addEventListener('click', ()=>{
          drawer.classList.toggle('open');
        });
        row.querySelector('[data-clear]').addEventListener('click', ()=>{
          localStorage.removeItem(NS+e.k);
          localStorage.removeItem(NS+e.k+'.best');
          populateFromStore();
          flash(row.querySelector('[data-quote]'), "Cleared. Fresh start.");
        });

        const logArea = row.querySelector('[data-log]');
        const pbEl    = row.querySelector('[data-pb]');
        const badgeEl = row.querySelector('[data-badge]');
        const quoteEl = row.querySelector('[data-quote]');

        function populateFromStore(){
          const saved = JSON.parse(localStorage.getItem(NS+e.k) || '{}');
          logArea.querySelectorAll('[data-field]').forEach(inp=>{
            const id = inp.dataset.field;
            if(saved[id]) inp.value = saved[id];
          });
          const bestWas = parseFloat(localStorage.getItem(NS+e.k+'.best')||'0')||0;
          pbEl.textContent = bestWas>0 ? `PB score: ${bestWas.toFixed(1)} (wÃ—r best set)` : '';
          badgeEl.textContent = milestoneText();
        }
        populateFromStore();

        logArea.querySelectorAll('[data-save]').forEach(btn=>{
          btn.addEventListener('click', ()=>{
            const obj = {};
            logArea.querySelectorAll('[data-field]').forEach(inp=>{
              obj[inp.dataset.field] = inp.value.trim();
            });
            localStorage.setItem(NS+e.k, JSON.stringify(obj));

            const bestNow = bestScore(obj);
            const bestWas = parseFloat(localStorage.getItem(NS+e.k+'.best')||'0')||0;
            if(bestNow > bestWas){
              localStorage.setItem(NS+e.k+'.best', bestNow);
              pbEl.textContent = `New PB! ${bestNow.toFixed(1)} (best wÃ—r)`;
              flash(quoteEl, pick(QUOTES));
            }else{
              pbEl.textContent = bestWas>0 ? `PB score: ${bestWas.toFixed(1)} (wÃ—r best set)` : 'Saved.';
              flash(quoteEl, pick(QUOTES));
            }

            // global save counter -> badges
            const total = (parseInt(localStorage.getItem(NS+'saves')||'0',10) + 1);
            localStorage.setItem(NS+'saves', total);
            badgeEl.textContent = milestoneText(total);
          });
        });

        blk.appendChild(row);
      });
      planEl.appendChild(blk);
    });
  }

  function bestScore(obj){
    let best = 0;
    for(let i=1;i<=5;i++){
      const w = parseFloat(obj['w'+i]||'0')||0;   // kg or minutes
      const r = parseFloat(obj['r'+i]||'0')||0;   // reps or RPE
      best = Math.max(best, w*r);
    }
    return best;
  }

  function milestoneText(count){
    const n = typeof count==='number' ? count : parseInt(localStorage.getItem(NS+'saves')||'0',10);
    if(n>=200) return 'Milestone: 200 logs saved ðŸ”¥';
    if(n>=100) return 'Milestone: 100 logs saved ðŸŽ‰';
    if(n>=50)  return 'Milestone: 50 logs saved ðŸ’ª';
    if(n>=25)  return 'Milestone: 25 logs saved ðŸ™Œ';
    if(n>=10)  return 'Milestone: 10 logs saved âœ…';
    if(n>=5)   return 'Milestone: 5 logs saved âœ¨';
    return '';
    }

  function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
  function flash(el, text){
    if(!el) return;
    el.textContent = text;
    el.style.opacity = '1';
    setTimeout(()=>{ el.style.opacity='.92'; }, 50);
  }

  /* ========= Export / Import ========= */
  document.getElementById('btnExport').addEventListener('click', ()=>{
    const dump = {};
    for(let i=0;i<localStorage.length;i++){
      const k = localStorage.key(i);
      if(k && k.startsWith(NS)){ dump[k] = localStorage.getItem(k); }
    }
    const blob = new Blob([JSON.stringify(dump,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'freefitfuel-workouts-backup.json';
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  });

  document.getElementById('importFile').addEventListener('change', (e)=>{
    const file = e.target.files?.[0]; if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      try{
        const obj = JSON.parse(String(reader.result||'{}'));
        Object.keys(obj).forEach(k=>{
          if(k.startsWith(NS)) localStorage.setItem(k, obj[k]);
        });
        alert('Logs imported âœ…');
        renderPlan();
      }catch{
        alert('Import failed â€” invalid file.');
      }
    };
    reader.readAsText(file);
  });

  /* ========= Mount ========= */
  renderPlan();
  </script>
</body>
</html>
