<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Personal Meal Plan – FreeFitFuel</title>
  <link rel="stylesheet" href="/style.css?v=wb6">
  <meta name="theme-color" content="#FF6A00">
  <style>
    body{background:#0d0d0d;color:#eaeaea;font-family:Inter,Arial,sans-serif;line-height:1.6;margin:0;}
    h1,h2,h3{color:#fff;}
    .wrap{max-width:850px;margin:0 auto;padding:16px;}
    select,input[type="checkbox"]{margin:4px 6px;}
    .panel{background:#1a1a1a;border:1px solid #2a2a2a;border-radius:12px;padding:16px;margin:18px 0;}
    .panel h2{margin-top:0;font-size:1.2rem;color:#FF6A00;}
    .panel label{display:block;margin:.35rem 0;}
    .panel p.info{display:none;margin:.25rem 0 .75rem;font-size:.9rem;color:#ccc;}
    .macro-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;margin:18px 0;}
    .macro-card{border-radius:10px;padding:14px;text-align:center;color:#fff;}
    .macro-card h3{margin:.3rem 0;font-size:1.1rem;}
    .macro-card p{margin:0;}
    .macro-cal{background:#FF6A00;}
    .macro-pro{background:#4CAF50;}
    .macro-carb{background:#2196F3;}
    .macro-fat{background:#9C27B0;}
    section.meal{background:#161616;border:1px solid #2b2b2b;border-radius:12px;padding:14px;margin:12px 0;}
    section.meal h3{margin-top:0;color:#FF6A00;font-size:1.1rem;}
    section.meal ul{margin:0 0 6px 18px;}
    section.meal .prep{color:#dcdcdc;margin-top:6px;}
    button.cta{display:inline-block;background:#FF6A00;color:#fff;border:0;border-radius:8px;padding:10px 18px;font-weight:600;cursor:pointer;margin:12px 0;}
    .disclaimer{background:#111;border-left:4px solid #444;padding:12px;border-radius:8px;font-size:.9rem;color:#ccc;margin:18px 0;}
    footer.site-footer{text-align:center;padding:16px 0;color:#aaa;font-size:.9rem;border-top:1px solid #222;}
    @media(max-width:600px){.macro-card{padding:10px;font-size:.9rem;}}
  </style>
</head>
<body>

<!-- Shared header -->
<div id="site-header"></div>
<script src="/js/header-loader.js"></script>

<main class="wrap">
  <h1>Adaptive Nutrition Plan</h1>
  <p>Personalised meal plan based on your BMR, activity, and chosen goal.</p>

  <!-- Goal + Phase -->
  <section class="panel">
    <h2>Goal &amp; Phase</h2>
    <label>Goal:
      <select id="goal">
        <option value="cut">Cut (Fat Loss)</option>
        <option value="maintain">Maintain</option>
        <option value="transform">Transform / Recomp</option>
        <option value="bulk">Bulk (Muscle Gain)</option>
      </select>
    </label>
    <div id="phaseWrap" style="margin-top:6px;">
      <label>Phase:
        <select id="phase">
          <option value="build">Build</option>
          <option value="cut">Cut</option>
        </select>
      </label>
    </div>
  </section>

  <!-- Hormone & Metabolic Health -->
  <section class="panel" id="health-panel">
    <h2>Hormone &amp; Metabolic Health</h2>
    <label>Sex:
      <select id="sex">
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </label>

    <div id="female-options">
      <label><input type="checkbox" id="cycle"> Adjust for menstrual cycle phases</label>
      <p class="info" id="cycleInfo">Your energy and appetite can fluctuate during the month. Adjusting nutrition around cycle phases can improve recovery and ease cravings.</p>

      <label><input type="checkbox" id="peri"> Perimenopause support</label>
      <p class="info" id="periInfo">Hormones begin to fluctuate, so steadier energy, higher protein, and calcium-rich meals help maintain bone and muscle strength.</p>

      <label><input type="checkbox" id="meno"> Menopause support</label>
      <p class="info" id="menoInfo">After menopause, metabolism can slow. A slightly higher protein and healthy-fat intake supports strength, energy, and heart health.</p>
    </div>

    <label><input type="checkbox" id="lowT"> Low testosterone / hormonal imbalance</label>
    <p class="info" id="lowTInfo">Low testosterone can reduce strength and recovery. Nutrition with zinc, magnesium, and healthy fats supports hormone balance and lean mass.</p>

    <label><input type="checkbox" id="thyroid"> Thyroid condition support</label>
    <p class="info" id="thyroidInfo">The thyroid regulates energy use. Consistent meal timing and nutrients such as iodine and selenium help support healthy function.</p>

    <label><input type="checkbox" id="diabetes"> Diabetes / blood-sugar control</label>
    <p class="info" id="diabetesInfo">Higher fibre and protein, alongside low-GI carbohydrates, help keep energy stable and support healthy blood-sugar balance.</p>
  </section>

  <!-- Macro Summary -->
  <div class="macro-grid">
    <div class="macro-card macro-cal"><h3>Calories</h3><p id="calVal">--</p></div>
    <div class="macro-card macro-pro"><h3>Protein</h3><p id="proVal">--</p></div>
    <div class="macro-card macro-carb"><h3>Carbs</h3><p id="carbVal">--</p></div>
    <div class="macro-card macro-fat"><h3>Fats</h3><p id="fatVal">--</p></div>
  </div>

  <!-- Meals -->
  <section class="meal">
    <h3>Breakfast — Protein Oats</h3>
    <ul><li>40 g oats</li><li>1 scoop protein powder</li><li>200 ml milk</li><li>50 g berries</li></ul>
    <p class="prep">Mix oats, milk, and protein powder. Microwave for 90 seconds, stir, then another 30 seconds until thick. Add berries and let stand before eating.</p>
  </section>

  <section class="meal">
    <h3>Lunch — Chicken, Rice &amp; Greens</h3>
    <ul><li>150 g chicken breast</li><li>100 g cooked rice</li><li>150 g mixed vegetables</li><li>1 tsp olive oil</li></ul>
    <p class="prep">Grill or pan-cook chicken until fully cooked. Steam or microwave vegetables. Drizzle with olive oil and serve with rice.</p>
  </section>

  <section class="meal">
    <h3>Snack — Greek Yoghurt &amp; Nuts</h3>
    <ul><li>150 g Greek yoghurt</li><li>50 g berries</li><li>15 g mixed nuts</li></ul>
    <p class="prep">Spoon yoghurt into a bowl. Top with berries and nuts. Eat chilled or on the go.</p>
  </section>

  <section class="meal">
    <h3>Dinner — Salmon, Sweet Potato &amp; Greens</h3>
    <ul><li>120 g salmon fillet</li><li>100 g sweet potato</li><li>150 g green vegetables</li><li>1 tsp olive oil</li></ul>
    <p class="prep">Bake salmon in foil with a drizzle of oil at 180 °C for 15–20 minutes. Boil or roast sweet potato until soft. Steam greens and serve together.</p>
  </section>

  <section class="meal">
    <h3>Post-Workout — Shake</h3>
    <ul><li>1 scoop whey protein</li><li>1 medium banana</li><li>250 ml water or milk</li></ul>
    <p class="prep">Blend all ingredients until smooth. Drink within 30 minutes of training.</p>
  </section>

  <button class="cta" id="pdfBtn">⬇️ Download Plan (PDF)</button>

  <div class="disclaimer" id="healthDisclaimer" hidden>
    <p><strong>Note:</strong> These adjustments are nutritional guidelines, not medical treatment. If you have a diagnosed condition or ongoing fatigue, consult your GP or specialist.</p>
  </div>
</main>
<script>
/* ----------  GLOBAL STATE  ---------- */
let currentDay = 0;

/* ----------  7–DAY ROTATION DATA  ---------- */
const dayPlans = [
  {
    breakfast: {
      title:"Protein Oats",
      items:["40 g oats","1 scoop protein powder","200 ml milk","50 g berries"],
      prep:"Mix oats, milk and protein powder. Microwave 90 seconds, stir, then another 30 seconds until thick. Add berries and rest 1 minute."
    },
    lunch:{
      title:"Chicken, Rice & Greens",
      items:["150 g chicken breast","100 g cooked rice","150 g mixed veg","1 tsp olive oil"],
      prep:"Grill chicken until cooked. Steam vegetables. Drizzle with olive oil and serve with rice."
    },
    snack:{
      title:"Greek Yoghurt & Nuts",
      items:["150 g Greek yoghurt","50 g berries","15 g nuts"],
      prep:"Top yoghurt with berries and nuts."
    },
    dinner:{
      title:"Salmon, Sweet Potato & Greens",
      items:["120 g salmon","100 g sweet potato","150 g green veg","1 tsp olive oil"],
      prep:"Bake salmon 15–20 min @ 180 °C. Boil sweet potato until soft, steam greens."
    },
    post:{
      title:"Shake",
      items:["1 scoop whey protein","1 medium banana","250 ml water or milk"],
      prep:"Blend until smooth. Drink within 30 min after training."
    }
  },
  {
    breakfast:{title:"Scrambled Eggs & Toast",items:["2 eggs","1 slice whole-grain toast","½ avocado"],prep:"Whisk eggs, cook gently. Serve on toast with avocado."},
    lunch:{title:"Tuna Pasta Salad",items:["100 g tuna","75 g pasta","mixed veg","1 tsp olive oil"],prep:"Cook pasta, drain, mix with tuna, veg and oil."},
    snack:{title:"Apple & Peanut Butter",items:["1 apple","1 tbsp natural PB"],prep:"Slice apple, spread PB thinly on slices."},
    dinner:{title:"Turkey Stir-Fry & Rice",items:["150 g turkey","100 g rice","mixed veg","soy sauce"],prep:"Stir-fry turkey and veg, add rice and soy sauce."},
    post:{title:"Chocolate Protein Shake",items:["1 scoop protein","250 ml milk"],prep:"Shake well and drink after training."}
  },
  {
    breakfast:{title:"Overnight Oats & Chia",items:["40 g oats","1 tsp chia seeds","150 ml milk","fruit to top"],prep:"Mix and leave overnight in fridge."},
    lunch:{title:"Beef Chilli & Quinoa",items:["150 g lean beef","100 g quinoa","beans","tomato sauce"],prep:"Simmer beef with beans and sauce 15 min. Serve over quinoa."},
    snack:{title:"Protein Bar",items:["1 bar (≈200 kcal)"],prep:"Keep on hand for convenience."},
    dinner:{title:"Baked Cod & Potatoes",items:["120 g cod","100 g potatoes","veg"],prep:"Bake cod 15 min. Boil potatoes and steam veg."},
    post:{title:"Shake + Banana",items:["1 scoop protein","1 banana"],prep:"Blend and serve."}
  },
  {
    breakfast:{title:"Smoothie Bowl",items:["1 banana","1 scoop protein","1 tsp PB","100 ml milk","fruit toppings"],prep:"Blend banana, protein, PB and milk. Top with fruit."},
    lunch:{title:"Tofu Bowl & Brown Rice",items:["120 g tofu","100 g brown rice","veg","1 tsp oil"],prep:"Pan-fry tofu and veg. Serve over rice."},
    snack:{title:"Cottage Cheese & Fruit",items:["100 g cottage cheese","fruit of choice"],prep:"Combine and eat cold."},
    dinner:{title:"Chicken Fajita Wrap",items:["120 g chicken","wrap","peppers & onion","salsa"],prep:"Stir-fry chicken and veg. Assemble wrap with salsa."},
    post:{title:"Whey Shake",items:["1 scoop protein","200 ml water"],prep:"Shake and drink after training."}
  },
  {
    breakfast:{title:"Greek Yoghurt & Granola",items:["150 g Greek yoghurt","30 g granola","berries"],prep:"Layer in bowl and serve."},
    lunch:{title:"Tuna Jacket Potato",items:["1 baked potato","100 g tuna","1 tbsp light mayo"],prep:"Bake potato, top with tuna mix."},
    snack:{title:"Nuts & Fruit",items:["15 g mixed nuts","1 fruit piece"],prep:"Snack as needed."},
    dinner:{title:"Lamb Stew & Veg",items:["150 g lamb","carrots & potatoes","stock"],prep:"Simmer lamb and veg in stock ≈ 45 min."},
    post:{title:"Shake + Oats",items:["1 scoop protein","20 g oats","250 ml milk"],prep:"Blend all ingredients and serve."}
  },
  {
    breakfast:{title:"Omelette & Spinach",items:["2 eggs","handful spinach","1 slice toast"],prep:"Beat eggs and cook with spinach. Serve with toast."},
    lunch:{title:"Chickpea Curry & Rice",items:["150 g chickpeas","100 g rice","curry sauce"],prep:"Simmer chickpeas in sauce, serve over rice."},
    snack:{title:"Oat Cakes & PB",items:["2 oat cakes","1 tsp PB"],prep:"Spread PB thinly and eat before workout."},
    dinner:{title:"Baked Salmon & Veg",items:["120 g salmon","150 g veg"],prep:"Bake salmon and steam veg."},
    post:{title:"Shake",items:["1 scoop protein","250 ml water"],prep:"Shake and drink after training."}
  },
  {
    breakfast:{title:"Pancakes & Berries",items:["2 protein pancakes","fruit topping","1 tsp PB"],prep:"Cook pancakes, top with fruit and PB."},
    lunch:{title:"Chicken Wrap & Salad",items:["1 wrap","120 g chicken","salad mix"],prep:"Assemble wrap and serve cold or grilled."},
    snack:{title:"Hummus & Veg Sticks",items:["2 tbsp hummus","carrot and pepper sticks"],prep:"Dip and enjoy."},
    dinner:{title:"Prawn Stir-Fry & Rice Noodles",items:["150 g prawns","veg","80 g rice noodles","soy sauce"],prep:"Stir-fry prawns and veg. Add noodles and soy sauce."},
    post:{title:"Shake",items:["1 scoop protein","250 ml milk"],prep:"Blend and serve."}
  }
];

/* ----------  LOAD MEAL PLAN INTO DOM  ---------- */
function loadPlan(idx){
  const meals=document.querySelectorAll('.meal');
  const labels=['breakfast','lunch','snack','dinner','post'];
  labels.forEach((k,i)=>{
    const m=dayPlans[idx][k];
    const s=meals[i];
    s.querySelector('h3').textContent=`${m.title}`;
    const ul=s.querySelector('ul');ul.innerHTML='';
    m.items.forEach(it=>ul.innerHTML+=`<li>${it}</li>`);
    s.querySelector('.prep').textContent=m.prep;
  });
}
loadPlan(currentDay);

/* ----------  NEXT-DAY BUTTON  ---------- */
document.getElementById('nextDayBtn').addEventListener('click',()=>{
  currentDay=(currentDay+1)%dayPlans.length;
  loadPlan(currentDay);
  window.scrollTo({top:0,behavior:'smooth'});
});

/* ----------  TOGGLE INFO TEXT  ---------- */
document.querySelectorAll('#health-panel input[type=checkbox]').forEach(cb=>{
  cb.addEventListener('change',()=>{
    const info=document.getElementById(cb.id+'Info');
    if(info)info.style.display=cb.checked?'block':'none';
    document.getElementById('healthDisclaimer').hidden=
      !document.querySelectorAll('#health-panel input:checked').length;
  });
});

/* ----------  MACRO CALC (very light demo logic)  ---------- */
function updateMacros(){
  const goal=document.getElementById('goal').value;
  let c=2500,p=180,car=250,f=70;
  if(goal==='cut'){c-=500;p+=10;}
  if(goal==='bulk'){c+=400;car+=50;}
  if(goal==='transform'){p+=20;car-=20;}
  document.getElementById('calVal').textContent=c+' kcal';
  document.getElementById('proVal').textContent=p+' g';
  document.getElementById('carbVal').textContent=car+' g';
  document.getElementById('fatVal').textContent=f+' g';
}
document.getElementById('goal').onchange=updateMacros;
updateMacros();

/* ----------  PDF EXPORT (mobile-optimised A5)  ---------- */
document.getElementById('pdfBtn').addEventListener('click',()=>{
  import('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js')
  .then(js=>{
    const {jsPDF}=js.jspdf;
    const doc=new jsPDF({orientation:'portrait',format:'a5',unit:'pt'});
    doc.setFontSize(14);
    doc.text(`FreeFitFuel — Day ${currentDay+1} Plan`,20,40);
    let y=70;
    document.querySelectorAll('.meal').forEach(m=>{
      doc.setFontSize(12);
      doc.text(m.querySelector('h3').textContent,20,y);y+=14;
      m.querySelectorAll('ul li').forEach(li=>{
        doc.setFontSize(10);
        doc.text('• '+li.textContent,26,y);y+=12;
      });
      doc.setFontSize(10);
      doc.text('Prep: '+m.querySelector('.prep').textContent,20,y);
      y+=24;
    });
    doc.save(`freefitfuel-day${currentDay+1}.pdf`);
  });
});
</script>

<!-- Fixed bottom button -->
<button class="cta fixed-next" id="nextDayBtn">Next Day Plan →</button>

<footer class="site-footer">
  <div class="container">
    <img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
    <p>© 2025 FreeFitFuel™ · Mind & Body in Balance</p>
    <p class="credit">Created by Grant Cameron Anthony</p>
  </div>
</footer>
</body>
</html>
