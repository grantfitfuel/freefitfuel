<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nutrition – FreeFitFuel</title>

  <link rel="stylesheet" href="style.css?v=26">
  <link rel="icon" type="image/svg+xml" href="img/freefitfuel-logo.svg">

  <!-- Minimal Nutrition-only tweaks -->
  <style>
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px 20px}
    .section{background:var(--glass);border:1px solid var(--stroke);border-radius:14px;margin:12px 0;padding:14px}

    /* Recipe grid: compact, 3+ across on desktop */
    #recipeGrid{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
    #recipeGrid .card{padding:10px 12px;border:1px solid var(--stroke);border-radius:10px;background:var(--glass);display:flex;flex-direction:column;gap:.4rem}
    #recipeGrid .card h3{font-size:1.05rem;margin:0}
    #recipeGrid .card .meta{font-size:.9rem;color:var(--inkdim)}
    #recipeGrid .card .mini-nav{display:flex;flex-wrap:wrap;gap:.3rem}
    #recipeGrid .card .mini-nav .chip{background:var(--glass);border:1px solid var(--stroke);border-radius:999px;padding:.2rem .5rem;font-size:.78rem}
    #recipeGrid .card .btn{font-size:.85rem;padding:.4rem .6rem}

    /* Remove images from recipe tiles only */
    #recipeGrid .card img, #recipeGrid img.card-img{display:none !important}

    /* Filter chips */
    #filterChips{display:flex;flex-wrap:wrap;gap:.5rem;margin:.75rem 0 1rem}
    #filterChips .chip{background:var(--glass);border:1px solid var(--stroke);color:var(--ink);padding:.45rem .8rem;border-radius:999px;font-size:.92rem;cursor:pointer}
    #filterChips .chip[aria-pressed="true"]{background:var(--accent);color:#111;font-weight:800}

    /* Panels & modal */
    .panel{position:fixed;top:0;right:0;height:100%;width:min(420px,100%);background:#0b0f14;color:var(--ink);
      border-left:1px solid var(--stroke);transform:translateX(100%);transition:transform .25s ease;z-index:1000;overflow:auto}
    .panel.open{transform:translateX(0)}
    .panel .panel-header{position:sticky;top:0;background:#0b0f14;border-bottom:1px solid var(--stroke);padding:12px}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:opacity .2s;z-index:900}
    .overlay.show{opacity:1;pointer-events:auto}

    /* ===== Dialog (recipe card) ===== */
    dialog.recipe-modal {
      background:#0b0f14; color:var(--ink);
      width:min(900px,96vw); max-height:90vh; overflow:auto;
      border:0; border-radius:12px; padding:0; z-index:1100;
    }
    dialog.recipe-modal::backdrop{background:rgba(0,0,0,.5)}
    dialog[open]{display:block}
    .recipe-modal .modal-head{position:sticky;top:0;display:flex;justify-content:space-between;gap:.6rem;align-items:center;padding:12px 14px;border-bottom:1px solid var(--stroke);background:#0b0f14}
    .recipe-modal .modal-body{padding:14px}
    .recipe-modal .meta{color:var(--inkdim)}
    .recipe-modal .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:700px){ .recipe-modal .grid-2{grid-template-columns:1fr} }
  </style>
</head>
<body>

<header class="site-header">
  <div class="container">
    <a href="index.html" class="logo"><img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="56"></a>
    <button class="hamburger" aria-label="Open menu" aria-controls="primary-nav" aria-expanded="false"><span></span><span></span><span></span></button>
    <nav id="primary-nav" class="main-nav" aria-label="Primary">
      <a href="index.html">Home</a>
      <a href="ideas.html">Ideas</a>
      <a href="guides.html">Guides</a>
      <a href="workouts.html">Workouts</a>
      <a href="endurance.html">Endurance</a>
      <a href="nutrition.html" aria-current="page">Nutrition</a>
      <a href="wellbeing.html">Wellbeing</a>
      <a href="contact.html">Contact</a>
      <a href="tracker.html">Tracker</a>
    </nav>
  </div>
</header>

<header class="hero-mini" role="banner" aria-label="Nutrition hero">
  <figure>
    <img src="img/nutrition-hero.png" alt="Fresh colourful food ingredients on a table">
    <div class="overlay" aria-hidden="true"></div>
  </figure>
  <div class="content wrap">
    <h1><span class="accent">Fuel That Fits Your Life</span></h1>
    <p>Balanced macros, budget-friendly recipes, Pantry mode, and a simple planner.</p>
    <div class="cta-row">
      <a class="btn" href="#macro-calc">Start Calculator</a>
      <a class="btn" href="pdf/macro-cheatsheet.pdf">Macro Cheat Sheet (PDF)</a>
    </div>
  </div>
</header>

<main class="wrap">
  <!-- CALCULATOR -->
  <section class="section" id="macro-calc">
    <h2>Calories & Macros Calculator</h2>

    <div class="toolbar" aria-label="Goal selector">
      <div class="seg" role="tablist" aria-label="Goal">
        <button role="tab" class="goal-chip" aria-pressed="true"  data-goal="Maintain">Maintain</button>
        <button role="tab" class="goal-chip" aria-pressed="false" data-goal="Cut">Cut</button>
        <button role="tab" class="goal-chip" aria-pressed="false" data-goal="Build/Bulk">Build/Bulk</button>
        <button role="tab" class="goal-chip" aria-pressed="false" data-goal="Transform">Transform</button>
      </div>
    </div>

    <div class="grid" style="grid-template-columns:repeat(3,1fr)">
      <label>Sex
        <select id="bmrSex" class="input"><option value="male">Male</option><option value="female">Female</option></select>
      </label>
      <label>Age (years)
        <input id="bmrAge" class="input" type="number" min="13" max="90" value="30">
      </label>
      <label>Height (cm)
        <input id="bmrHeight" class="input" type="number" min="120" max="220" value="175">
      </label>
      <label>Weight (kg)
        <input id="bmrWeight" class="input" type="number" min="35" max="250" value="75">
      </label>
      <label>Activity
        <select id="bmrActivity" class="input">
          <option value="1.2">Sedentary (x1.2)</option>
          <option value="1.375">Light (x1.375)</option>
          <option value="1.55" selected>Moderate (x1.55)</option>
          <option value="1.725">Very active (x1.725)</option>
          <option value="1.9">Athlete (x1.9)</option>
        </select>
      </label>
      <div style="display:flex;align-items:flex-end;gap:.6rem">
        <button id="calcNow" class="btn">Calculate</button>
        <button id="calcCopy" class="btn">Copy</button>
      </div>
    </div>

    <div class="section" style="margin-top:.8rem">
      <h3>Your targets</h3>
      <p class="meta" id="goalLine">Goal: <strong>Maintain</strong> — based on Mifflin–St Jeor + activity</p>
      <div class="grid" style="grid-template-columns:repeat(4,1fr)">
        <div><strong>Calories</strong><br><span id="outKcal">—</span> kcal/day</div>
        <div><strong>Protein</strong><br><span id="outProtein">—</span> g/day</div>
        <div><strong>Carbs</strong><br><span id="outCarbs">—</span> g/day</div>
        <div><strong>Fat</strong><br><span id="outFat">—</span> g/day</div>
      </div>
    </div>
  </section>

  <!-- WEEK SUMMARY ON PAGE -->
  <section class="section" id="weekSummarySection" aria-label="This Week's Meal Plan">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:.6rem;flex-wrap:wrap">
      <h2 style="margin:0">This Week’s Plan</h2>
      <div>
        <button id="weekAutoBtn" class="btn">Auto-plan Week (no duplicates)</button>
        <button id="weekClearBtn" class="btn">Clear Week</button>
      </div>
    </div>
    <p class="meta" style="margin:.4rem 0">Swap any slot to rotate in a different unique recipe. This summary mirrors the planner panel.</p>
    <div id="weekSummaryGrid" class="grid" style="grid-template-columns:repeat(4,1fr)"></div>
  </section>

  <!-- TOOLS: search + filters -->
  <section class="section" aria-label="Recipe tools">
    <div class="grid" style="grid-template-columns:2fr 1fr">
      <div>
        <label for="recipeSearch" class="visually-hidden">Search recipes</label>
        <input id="recipeSearch" class="input" type="search" placeholder="Search recipes, ingredients, tags…">
      </div>
      <div style="display:flex;gap:.6rem;justify-content:flex-end;align-items:center;">
        <button id="pantryOpenBtn" class="btn">Pantry</button>
        <button id="openPlannerBtn" class="btn">Open Meal Planner</button>
      </div>
    </div>

    <div id="filterChips" role="toolbar" aria-label="Recipe filters">
      <button class="chip" data-filter="ALL" aria-pressed="true">ALL</button>
      <!-- JS appends the rest -->
    </div>

    <p id="recipeCount" class="meta" aria-live="polite">Showing 0 of 0 recipes</p>
    <button id="clearFiltersBtn" class="btn" style="display:none">Clear filters</button>
  </section>

  <!-- GRID -->
  <section class="section">
    <div id="recipeGrid" class="grid" aria-live="polite" aria-busy="true"></div>
  </section>

  <!-- INFO -->
  <section class="section">
    <div class="grid">
      <article class="card">
        <h3>Macros 101</h3>
        <p>Protein rebuilds muscle; carbs fuel effort; fats support hormones and vitamins.</p>
      </article>
      <article class="card">
        <h3>Hydration</h3>
        <p>Guide: ~30–35 ml/kg/day. Add ~500–1000 ml around workouts depending on sweat and duration.</p>
        <div class="calc" style="margin-top:.6rem">
          <label>Your weight (kg)
            <input id="hydrWeight" type="number" value="75" class="input" style="max-width:100px">
          </label>
          <button id="hydrCalc" class="btn">Calculate</button>
        </div>
        <p class="meta" id="hydrOut">Daily target: — ml</p>
      </article>
    </div>
  </section>

  <section class="section">
    <h2>Important Note</h2>
    <p>The content on FreeFitFuel is for general fitness education only and isn’t a substitute for personalised medical advice.</p>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <img src="img/freefitfuel-logo.svg" alt="FreeFitFuel Logo" height="64">
    <p>© 2025 FreeFitFuel · All rights reserved.</p>
    <p class="credit">Created by Grant Cameron Anthony</p>
  </div>
</footer>

<!-- Panels & modal shells -->
<aside id="pantryPanel" class="panel" aria-hidden="true"></aside>
<aside id="plannerPanel" class="panel" aria-hidden="true"></aside>
<dialog id="recipeModal" class="recipe-modal" aria-hidden="true"></dialog>
<div id="printArea" hidden></div>
<div id="overlay" class="overlay"></div>

<!-- Inline scripts (burger + calculators) -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.querySelector('.hamburger');
  const nav = document.querySelector('.main-nav');
  if(btn && nav){
    btn.addEventListener('click', () => {
      const open = btn.classList.toggle('active');
      nav.classList.toggle('open', open);
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  }

  // ===== Macros calculator =====
  const goalChips=[...document.querySelectorAll('.goal-chip')];
  let GOAL='Maintain';
  goalChips.forEach(b=>b.addEventListener('click', ()=>{
    goalChips.forEach(x=>x.setAttribute('aria-pressed','false'));
    b.setAttribute('aria-pressed','true'); GOAL=b.dataset.goal; update();
  }));

  const sex=bmrSex, age=bmrAge, ht=bmrHeight, wt=bmrWeight, act=bmrActivity;
  const outK=outKcal, outP=outProtein, outC=outCarbs, outF=outFat, goalLine=document.getElementById('goalLine');

  function calcBMR(s,kg,cm,yrs){ return s==='male' ? 10*kg + 6.25*cm - 5*yrs + 5 : 10*kg + 6.25*cm - 5*yrs - 161; }
  function targetsFromTDEE(tdee, goal){
    let kcal=tdee;
    if(goal==='Cut') kcal*=0.82;
    if(goal==='Build/Bulk') kcal*=1.15;
    if(goal==='Transform') kcal*=0.97;
    const kg=parseFloat(wt.value||0);
    let p_perkg=1.6; if(goal==='Cut') p_perkg=2.0; if(goal==='Build/Bulk') p_perkg=1.8; if(goal==='Transform') p_perkg=2.2;
    const protein_g=Math.round(p_perkg*kg);
    let carb_pct=0.50,fat_pct=0.30;
    if(goal==='Cut'){carb_pct=0.40;fat_pct=0.30}
    if(goal==='Build/Bulk'){carb_pct=0.55;fat_pct=0.25}
    if(goal==='Transform'){carb_pct=0.45;fat_pct=0.30}
    return {kcal:Math.round(kcal), protein_g, carbs_g:Math.round((kcal*carb_pct)/4), fat_g:Math.round((kcal*fat_pct)/9)};
  }
  function update(){
    const bmr = calcBMR(sex.value, parseFloat(wt.value||0), parseFloat(ht.value||0), parseFloat(age.value||0));
    const tdee= bmr * parseFloat(act.value||1);
    const t=targetsFromTDEE(tdee, GOAL);
    outK.textContent=t.kcal; outP.textContent=t.protein_g+' g'; outC.textContent=t.carbs_g+' g'; outF.textContent=t.fat_g+' g';
    goalLine.innerHTML=`Goal: <strong>${GOAL}</strong> — based on Mifflin–St Jeor + activity`;
  }
  calcNow.addEventListener('click', update);
  calcCopy.addEventListener('click', ()=>{navigator.clipboard.writeText(`Goal: ${GOAL}\nCalories: ${outK.textContent} kcal\nProtein: ${outP.textContent}\nCarbs: ${outC.textContent}\nFat: ${outF.textContent}`); alert('Copied targets to clipboard.');});
  update();

  // Hydration
  function hydr(){ const kg=parseFloat(hydrWeight.value||0); if(!kg){hydrOut.textContent='Daily target: — ml';return} const lo=Math.round(kg*30), hi=Math.round(kg*35); hydrOut.textContent=`Daily target: ${lo} – ${hi} ml (≈ ${(lo/1000).toFixed(1)} – ${(hi/1000).toFixed(1)} L, plus extra if training)`;}
  hydrCalc.addEventListener('click', hydr); hydrWeight.addEventListener('input', hydr); hydr();
});
</script>

<!-- Nutrition JS -->
<script defer src="assets/js/nutrition.js?v=12"></script>
</body>
</html>
